"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var nativescript_ng2_fonticon_1 = require("nativescript-ng2-fonticon");
var WeatherService = /** @class */ (function () {
    function WeatherService(fonticon) {
        this.fonticon = fonticon;
        this.wx = {};
        this.qnhNumber = 1013;
        this.createNewWeather();
    }
    WeatherService.prototype.createNewWeather = function () {
        this.generateWx();
        return this.wx;
    };
    WeatherService.prototype.setWx = function (wx) {
        this.wx.wx.push(wx);
    };
    WeatherService.prototype.setVis = function (visMax, visMin, comment) {
        this.wx.vis = {};
        this.wx.vis.max = visMax;
        this.wx.vis.min = visMin;
        this.wx.vis.comment = comment;
    };
    WeatherService.prototype.setWind = function (direction, variation, strength, gustStrength) {
        this.wx.windStrength = strength;
        this.wx.windGustStrength = gustStrength;
        this.wx.windDirection = direction;
        this.wx.windDirectionVariation = variation;
    };
    WeatherService.prototype.setCloud = function (base, tops, coverage) {
        var cloud = {};
        cloud.base = base;
        cloud.tops = tops;
        cloud.coverage = coverage;
        this.wx.cloud.push(cloud);
    };
    WeatherService.prototype.setTemp = function (temp, dewpoint) {
        this.wx.temp = temp;
        this.wx.dewpoint = dewpoint;
    };
    WeatherService.prototype.getGroundCondition = function () {
        return this.wx.groundCondition;
    };
    WeatherService.prototype.setGround = function (cond) {
        this.wx.groundCondition = cond;
    };
    WeatherService.prototype.generateWind = function () {
        var windStrength = Math.floor(Math.random() * 17);
        var windGustStrength = Math.floor(Math.random() * 10);
        var windDirection = Math.floor(Math.random() * 36) * 10;
        var windDirectionVariation = Math.floor(Math.random() * 4) * 10;
        this.setWind(windDirection, windDirectionVariation, windStrength, windGustStrength);
    };
    WeatherService.prototype.generateTemp = function () {
        var temp = Math.floor(5 + Math.random() * 35);
        var rh = 50 + 50 * Math.random();
        var dewpoint = Math.floor(temp - (100 - rh) / 5);
        this.setTemp(temp, dewpoint);
    };
    WeatherService.prototype.generateWx = function () {
        this.qnhNumber = Math.floor(1023 - (Math.random() * 20));
        this.wx.qnh = this.toNumbers(this.qnhNumber);
        this.wx.cloud = [];
        this.generateWind();
        this.generateTemp();
        this.setVis(9999, 9999, '');
        this.setGround('');
        this.wx.wx = [];
        var maxOpts = 10;
        var dice = Math.round(Math.random() * maxOpts);
        var subDice = Math.round(Math.random() * maxOpts);
        switch (dice) {
            case 0:
                this.setWx('THUNDERSTORMS IN AREA');
                this.setCloud(2500, 14500, 3);
                this.setTemp(24, 18);
                var dir = Math.round(Math.random() * 36) * 10;
                var v = dir + 40;
                this.setWind(dir, v, 15, 20);
                this.setGround('WATER PATCHES');
                break;
            case 1:
                this.setWx('SHOWERS OF RAIN IN AREA');
                this.setCloud(2000, 4500, 6);
                this.setVis(9999, 4000, 'IN RAIN');
                this.setGround('WET');
                break;
            case 2:
                this.setWx('FOG IN AREA');
                this.setCloud(500, 1200, 7);
                this.setVis(2000, 400, 'IN FOG');
                this.setWind(0, 0, 0, 0);
                this.setTemp(11, 11);
                break;
            case 3:
                this.setWx('FOG');
                this.setVis(500, 500, 'IN FOG');
                this.wx.cloud = [];
                this.setWind(0, 0, 0, 0);
                this.setTemp(10, 10);
                this.setGround('DAMP');
                break;
            case 4:
            case 5:
            case 6:
                this.generateCloud();
                break;
            case 7:
            case 8:
            default:
                this.setWx('CAVOK');
                this.setVis(9999, 9999, '');
                break;
        }
        this.processCloud();
        console.log(this.awis());
    };
    WeatherService.prototype.generateCloud = function () {
        var layers = Math.round(Math.random() * 3);
        var alts = [800, 1500, 2000, 2500, 3000, 3500, 4000, 5000, 7000];
        this.wx.cloud = [];
        var coverage = Math.round(Math.random() * 8);
        for (var i = 0; i < layers; i++) {
            var layerI = Math.round(Math.random() * alts.length);
            var base = alts[layerI];
            var extent = Math.round(Math.random() * 3000);
            var tops = base + extent;
            this.setCloud(base, tops, coverage);
            if (++coverage > 8) {
                return;
            }
        }
    };
    WeatherService.prototype.oktasToString = function (o) {
        if (o >= 8) {
            return 'overcast';
        }
        else if (o > 4) {
            return 'broken';
        }
        else if (o > 3) {
            return 'scattered';
        }
        else if (o > 1) {
            return 'few';
        }
        else if (o > 0) {
            return 'isolated';
        }
        return '';
    };
    WeatherService.prototype.visAsString = function () {
        var v = this.stNumber(this.wx.vis.max) + ' metres';
        if (this.wx.vis.max === 9999) {
            v = 'greater than ten kilometres';
        }
        else if (this.wx.vis.max > 5000) {
            v = this.stNumber(this.wx.vis.max / 1000) + ' kilometres';
        }
        if (this.wx.vis.max > this.wx.vis.min) {
            v += ' reducing to ';
            if (this.wx.vis.min === 9999) {
                v += ' greater than ten kilometres';
            }
            else if (this.wx.vis.min > 5000) {
                v += this.stNumber(this.wx.vis.min / 1000) + ' kilometres';
            }
            else {
                v += this.stNumber(this.wx.vis.min) + ' metres';
            }
            v += ' ' + this.wx.vis.comment;
        }
        return v;
    };
    WeatherService.prototype.stNumber = function (n) {
        if (n === undefined) {
            return '';
        }
        var digits = n.toString().split('');
        if (n >= 1000) {
            var nst = this.toNumbers(Number(digits[0])) + ' thousand';
            if (digits[1] !== '0') {
                nst += ' ' + this.toNumbers(Number(digits[1])) + ' hundred';
            }
            return nst;
        }
        else if (n >= 100) {
            var nst = this.toNumbers(Number(digits[0])) + ' hundred';
            return nst;
        }
        else {
            var nst = this.toNumbers(n);
        }
    };
    WeatherService.prototype.awis = function () {
        var st = "wind: " + this.windAsString() + "  QNH " + this.wx.qnh + ", Temperature " + this.wx.temp + " dewpoint " + this.wx.dewpoint + ", visibility " + this.visAsString() + " " + this.wx.groundCondition + " cloud " + this.cloudAsString() + " " + this.weatherAsString() + "\n\n";
        return st;
    };
    WeatherService.prototype.processCloud = function () {
        var c = {};
        for (var i = 0; i < this.wx.cloud.length; i++) {
            var cloud = this.wx.cloud[i];
            c[cloud.base] = cloud;
        }
        this.wx.cloud = [];
        var alts = Object.keys(c).sort();
        for (var i = 0; i < alts.length; i++) {
            this.wx.cloud.push(c[alts[i]]);
        }
    };
    WeatherService.prototype.windAsString = function () {
        if (this.wx.windStrength === 0) {
            return 'calm';
        }
        else if (this.wx.windStrength <= 4) {
            return 'variable';
        }
        var st = '';
        if (this.wx.windDirectionVariation > 0) {
            var windDirTo = (this.wx.windDirection + this.wx.windDirectionVariation % 360);
            st = 'varying between ' + this.toNumbers(this.wx.windDirection) + ' and ' + this.toNumbers(windDirTo);
        }
        else {
            st = this.toNumbers(this.wx.windDirection);
        }
        st += ' degrees, ';
        if (this.wx.windGustStrength > this.wx.windStrength) {
            st += ' minimum ' + this.toNumbers(this.wx.windStrength) + ' maximum ' + this.toNumbers(this.wx.windGustStrength) + ' knots';
        }
        else {
            st += ' ' + this.toNumbers(this.wx.windStrength) + ' knots';
        }
        return st;
    };
    WeatherService.prototype.visAsShorthand = function () {
        var v = (this.wx.vis.max).toString() + 'm';
        if (this.wx.vis.max === 9999) {
            v = '>10k';
        }
        else if (this.wx.vis.max > 5000) {
            v = (this.wx.vis.max / 1000).toString() + 'k';
        }
        if (this.wx.vis.max > this.wx.vis.min) {
            console.log(this.fonticon.css.mdi['mdi-add']);
            v += "â†“";
            if (this.wx.vis.min === 9999) {
                v += ' >10k';
            }
            else if (this.wx.vis.min > 5000) {
                v += (this.wx.vis.min / 1000).toString() + 'k';
            }
            else {
                v += this.wx.vis.min.toString() + 'm';
            }
            v += ' ' + this.wx.vis.comment.toLowerCase();
        }
        return v;
    };
    WeatherService.prototype.shorthand = function (st) {
        st = st.replace(/thunderstorms/ig, 'ts');
        st = st.replace(/showers/ig, 'shwrs');
        st = st.replace(/ of /ig, ' ');
        st = st.replace(/rain/ig, 'rn');
        st = st.replace(/in area/ig, 'area');
        st = st.replace(/fog/ig, 'fg');
        st = st.replace(/smoke/ig, 'fu');
        st = st.replace(/mist/ig, 'br');
        st = st.replace(/isolated/ig, 'isol');
        st = st.replace(/broken/ig, 'bkn');
        st = st.replace(/scattered/ig, 'sct');
        st = st.replace(/overcast/ig, 'ovc');
        return st;
    };
    WeatherService.prototype.cloudAsShorthand = function () {
        if (this.wx.cloud.length === 0) {
            return '';
        }
        else if (this.isCAVOK()) {
            return '';
        }
        else {
            var st = '';
            for (var i = 0; i < this.wx.cloud.length; i++) {
                var cloud = this.wx.cloud[i];
                st += ' ' + this.oktasToString(cloud.coverage) + ' ' + cloud.base;
            }
            st = this.shorthand(st);
            return st;
        }
    };
    WeatherService.prototype.qnhAsShorthand = function () {
        return 'Q' + this.qnhNumber.toString();
    };
    WeatherService.prototype.wxAsShorthand = function () {
        var wx = '';
        if (this.wx.wx.length > 0) {
            wx = this.wx.wx.join(', ');
        }
        wx = this.shorthand(wx);
        console.log(wx);
        return wx;
    };
    WeatherService.prototype.windAsShorthand = function () {
        var wind = '';
        if (this.wx.windStrength === 0) {
            return 'wnd clm';
        }
        else if (this.wx.windStrength <= 4) {
            return 'wnd vbl';
        }
        var st = '';
        if (this.wx.windDirectionVariation > 0) {
            var windDirTo = (this.wx.windDirection + this.wx.windDirectionVariation % 360);
            st = this.wx.windDirection + ' - ' + windDirTo;
        }
        else {
            st = this.wx.windDirection.toString();
        }
        st += '/';
        if (this.wx.windGustStrength > this.wx.windStrength) {
            st += this.wx.windStrength + ' - ' + this.wx.windGustStrength;
        }
        else {
            st += this.wx.windStrength.toString();
        }
        return st;
    };
    WeatherService.prototype.isCAVOK = function () {
        return /CAVOK/.test(this.weatherAsString());
    };
    WeatherService.prototype.isFOG = function () {
        if (/FOG IN AREA/.test(this.weatherAsString())) {
            return false;
        }
        ;
        return /FOG/.test(this.weatherAsString());
    };
    WeatherService.prototype.isRVFR = function () {
        if ((this.wx.vis.min <= 5000) && (this.wx.vis.min >= 1600)) {
            return true;
        }
        return false;
    };
    WeatherService.prototype.isVFR = function () {
        if (this.isRVFR()) {
            return true;
        }
        if (this.wx.vis.min <= 5000) {
            return false;
        }
        var clouds = this.wx.cloud;
        var coverage = 0;
        for (var i = 0; i < clouds.length; i++) {
            var c = clouds[i];
            if (c.base < 1800) {
                coverage += c.coverage;
            }
        }
        if (coverage >= 2) {
            return false;
        }
        return true;
    };
    WeatherService.prototype.isIMC = function () {
        if (this.wx.vis.min <= 5000) {
            return true;
        }
        var clouds = this.wx.cloud;
        var coverage = 0;
        for (var i = 0; i < clouds.length; i++) {
            var c = clouds[i];
            if (c.base < 1800) {
                coverage += c.coverage;
            }
        }
        if (coverage >= 7) {
            return true;
        }
        return false;
    };
    WeatherService.prototype.cloudAsString = function () {
        if (this.wx.cloud.length === 0) {
            return 'nil';
        }
        else {
            var st = '';
            for (var i = 0; i < this.wx.cloud.length; i++) {
                var cloud = this.wx.cloud[i];
                st += ' ' + this.oktasToString(cloud.coverage) + ' ' + this.stNumber(cloud.base);
            }
            return st;
        }
    };
    WeatherService.prototype.weatherAsString = function () {
        if (this.wx.wx.length === 0) {
            return '';
        }
        else {
            return this.wx.wx.join(', ');
        }
    };
    WeatherService.prototype.toNumbers = function (n) {
        var map = {
            '0': 'zero',
            '1': 'wun',
            '2': 'two',
            '3': 'three',
            '4': 'fore',
            '5': 'fife',
            '6': 'six',
            '7': 'seffen',
            '8': 'eight',
            '9': 'niner',
        };
        var nst = n.toString();
        var d = nst.split('');
        var response = [];
        for (var i = 0; i < d.length; i++) {
            var dst = d[i];
            var dPhon = map[dst];
            if (dPhon !== undefined) {
                response.push(dPhon);
            }
            else {
                response.push(dst);
            }
        }
        return response.join(' ');
    };
    WeatherService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [nativescript_ng2_fonticon_1.TNSFontIconService])
    ], WeatherService);
    return WeatherService;
}());
exports.WeatherService = WeatherService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2VhdGhlci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2VhdGhlci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQTJDO0FBQzNDLHVFQUErRDtBQUkvRDtJQU1FLHdCQUFvQixRQUE0QjtRQUE1QixhQUFRLEdBQVIsUUFBUSxDQUFvQjtRQUoxQyxPQUFFLEdBQVksRUFBUyxDQUFDO1FBRXZCLGNBQVMsR0FBVyxJQUFJLENBQUM7UUFHaEMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDeEIsQ0FBQztJQUVNLHlDQUFnQixHQUF2QjtRQUNDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNwQixNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztJQUNkLENBQUM7SUFFRCw4QkFBSyxHQUFMLFVBQU0sRUFBVTtRQUNmLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNyQixDQUFDO0lBRUQsK0JBQU0sR0FBTixVQUFPLE1BQWMsRUFBRSxNQUFjLEVBQUUsT0FBZTtRQUNyRCxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFTLENBQUM7UUFDeEIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQztRQUN6QixJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7SUFDL0IsQ0FBQztJQUVELGdDQUFPLEdBQVAsVUFBUSxTQUFpQixFQUFFLFNBQWlCLEVBQUUsUUFBZ0IsRUFBRSxZQUFvQjtRQUNuRixJQUFJLENBQUMsRUFBRSxDQUFDLFlBQVksR0FBRyxRQUFRLENBQUM7UUFDaEMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsR0FBRyxZQUFZLENB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LEVBQUUsTUFBTTtZQUNYLEdBQUcsRUFBRSxLQUFLO1lBQ1YsR0FBRyxFQUFFLFFBQVE7WUFDYixHQUFHLEVBQUUsT0FBTztZQUNaLEdBQUcsRUFBRSxPQUFPO1NBQ1gsQ0FBQztRQUNBLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUMxQixJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3RCLElBQUksUUFBUSxHQUFhLEVBQUUsQ0FBQztRQUM1QixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUNuQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDZixJQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDckIsRUFBRSxDQUFDLENBQUMsS0FBSyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3pCLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDdEIsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNSLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDbkIsQ0FBQztRQUNGLENBQUM7UUFDRCxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN4QixDQUFDO0lBeGJTLGNBQWM7UUFEMUIsaUJBQVUsRUFBRTt5Q0FPbUIsOENBQWtCO09BTnJDLGNBQWMsQ0EyYjFCO0lBQUQscUJBQUM7Q0FBQSxBQTNiRCxJQTJiQztBQTNiWSx3Q0FBYyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFROU0ZvbnRJY29uU2VydmljZSB9IGZyb20gJ25hdGl2ZXNjcmlwdC1uZzItZm9udGljb24nO1xuaW1wb3J0IHsgV2VhdGhlciwgQ2xvdWQgfSBmcm9tICcuL3dlYXRoZXIuaW50ZXJmYWNlJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFdlYXRoZXJTZXJ2aWNlIHtcblxucHJpdmF0ZSB3eDogV2VhdGhlciA9IHt9IGFzIGFueTtcblxuICBwdWJsaWMgcW5oTnVtYmVyOiBudW1iZXIgPSAxMDEzO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZm9udGljb246IFROU0ZvbnRJY29uU2VydmljZSkge1xuIFx0dGhpcy5jcmVhdGVOZXdXZWF0aGVyKCk7XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlTmV3V2VhdGhlcigpOiBXZWF0aGVyIHtcbiAgXHR0aGlzLmdlbmVyYXRlV3goKTtcblx0cmV0dXJuIHRoaXMud3g7XG4gIH1cblxuICBzZXRXeCh3eDogc3RyaW5nKSB7XG4gIFx0dGhpcy53eC53eC5wdXNoKHd4KTtcbiAgfVxuXG4gIHNldFZpcyh2aXNNYXg6IG51bWJlciwgdmlzTWluOiBudW1iZXIsIGNvbW1lbnQ6IHN0cmluZykge1xuICBcdHRoaXMud3gudmlzID0ge30gYXMgYW55O1xuICBcdHRoaXMud3gudmlzLm1heCA9IHZpc01heDtcbiAgXHR0aGlzLnd4LnZpcy5taW4gPSB2aXNNaW47XG4gIFx0dGhpcy53eC52aXMuY29tbWVudCA9IGNvbW1lbnQ7XG4gIH1cblxuICBzZXRXaW5kKGRpcmVjdGlvbjogbnVtYmVyLCB2YXJpYXRpb246IG51bWJlciwgc3RyZW5ndGg6IG51bWJlciwgZ3VzdFN0cmVuZ3RoOiBudW1iZXIpIHtcblx0ICB0aGlzLnd4LndpbmRTdHJlbmd0aCA9IHN0cmVuZ3RoO1xuXHQgIHRoaXMud3gud2luZEd1c3RTdHJlbmd0aCA9IGd1c3RTdHJlbmd0aDtcblx0ICB0aGlzLnd4LndpbmREaXJlY3Rpb24gPSBkaXJlY3Rpb247XG5cdCAgdGhpcy53eC53aW5kRGlyZWN0aW9uVmFyaWF0aW9uID0gdmFyaWF0aW9uO1xuICB9XG5cbiAgc2V0Q2xvdWQoYmFzZTogbnVtYmVyLCB0b3BzOiBudW1iZXIsIGNvdmVyYWdlOiBudW1iZXIpIHtcbiAgXHRsZXQgY2xvdWQ6Q2xvdWQgPSB7fSBhcyBhbnk7XG5cdGNsb3VkLmJhc2UgPSBiYXNlO1xuXHRjbG91ZC50b3BzID0gdG9wcztcblx0Y2xvdWQuY292ZXJhZ2UgPSBjb3ZlcmFnZTtcblx0dGhpcy53eC5jbG91ZC5wdXNoKGNsb3VkKTtcbiAgfVxuXG4gIHNldFRlbXAodGVtcDogbnVtYmVyLCBkZXdwb2ludDogbnVtYmVyKSB7XG4gIFx0dGhpcy53eC50ZW1wID0gdGVtcDtcblx0dGhpcy53eC5kZXdwb2ludCA9IGRld3BvaW50O1xuICB9XG5cbiAgZ2V0R3JvdW5kQ29uZGl0aW9uKCkge1xuICBcdHJldHVybiB0aGlzLnd4Lmdyb3VuZENvbmRpdGlvbjtcbiAgfVxuXG4gIHNldEdyb3VuZChjb25kOiBzdHJpbmcpIHtcbiAgXHR0aGlzLnd4Lmdyb3VuZENvbmRpdGlvbiA9IGNvbmQ7XG4gIH1cblxuICBnZW5lcmF0ZVdpbmQoKSB7XG5cdGxldCB3aW5kU3RyZW5ndGggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxNyk7XG5cdGxldCB3aW5kR3VzdFN0cmVuZ3RoID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuXHRsZXQgd2luZERpcmVjdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDM2KSAqIDEwO1xuXHRsZXQgd2luZERpcmVjdGlvblZhcmlhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpICogMTA7XG5cdHRoaXMuc2V0V2luZCh3aW5kRGlyZWN0aW9uLCB3aW5kRGlyZWN0aW9uVmFyaWF0aW9uLCB3aW5kU3RyZW5ndGgsIHdpbmRHdXN0U3RyZW5ndGgpO1xuICB9XG5cbiAgZ2VuZXJhdGVUZW1wKCkge1xuXHRsZXQgdGVtcCA9IE1hdGguZmxvb3IoNSArIE1hdGgucmFuZG9tKCkgKiAzNSk7XG5cdGxldCByaCA9IDUwICsgNTAgKiBNYXRoLnJhbmRvbSgpO1xuXHRsZXQgZGV3cG9pbnQgPSBNYXRoLmZsb29yKHRlbXAgLSAoMTAwIC0gcmgpLzUpXG5cdHRoaXMuc2V0VGVtcCh0ZW1wLCBkZXdwb2ludCk7XG4gIH1cblxuICBwdWJsaWMgZ2VuZXJhdGVXeCgpIHtcbiAgXHR0aGlzLnFuaE51bWJlciA9IE1hdGguZmxvb3IoMTAyMyAtIChNYXRoLnJhbmRvbSgpICogMjApKTtcbiAgXHR0aGlzLnd4LnFuaCA9IHRoaXMudG9OdW1iZXJzKHRoaXMucW5oTnVtYmVyKTtcblx0dGhpcy53eC5jbG91ZCA9IFtdO1xuICBcdHRoaXMuZ2VuZXJhdGVXaW5kKCk7XG4gIFx0dGhpcy5nZW5lcmF0ZVRlbXAoKTtcbiAgXHR0aGlzLnNldFZpcyg5OTk5LCA5OTk5LCAnJyk7XG4gIFx0dGhpcy5zZXRHcm91bmQoJycpO1xuICBcdHRoaXMud3gud3ggPSBbXTtcblxuICBcdGxldCBtYXhPcHRzID0gMTA7XG5cdGxldCBkaWNlID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogbWF4T3B0cyk7XG5cdGxldCBzdWJEaWNlID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogbWF4T3B0cyk7XG5cdHN3aXRjaCAoZGljZSkge1xuXHRcdGNhc2UgMDpcblx0XHRcdHRoaXMuc2V0V3goJ1RIVU5ERVJTVE9STVMgSU4gQVJFQScpO1xuXHRcdFx0dGhpcy5zZXRDbG91ZCgyNTAwLCAxNDUwMCwgMyk7XG5cdFx0XHR0aGlzLnNldFRlbXAoMjQsIDE4KTtcblx0XHRcdGxldCBkaXI6IG51bWJlciA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSozNikgKiAxMDtcblx0XHRcdGxldCB2OiBudW1iZXIgPSBkaXIgKyA0MDtcblx0XHRcdHRoaXMuc2V0V2luZChkaXIsIHYsIDE1LCAyMCk7XG5cdFx0XHR0aGlzLnNldEdyb3VuZCgnV0FURVIgUEFUQ0hFUycpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAxOlxuXHRcdFx0dGhpcy5zZXRXeCgnU0hPV0VSUyBPRiBSQUlOIElOIEFSRUEnKTtcblx0XHRcdHRoaXMuc2V0Q2xvdWQoMjAwMCwgNDUwMCwgNik7XG5cdFx0XHR0aGlzLnNldFZpcyg5OTk5LCA0MDAwLCAnSU4gUkFJTicpO1xuXHRcdFx0dGhpcy5zZXRHcm91bmQoJ1dFVCcpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAyOlxuXHRcdFx0dGhpcy5zZXRXeCgnRk9HIElOIEFSRUEnKTtcblx0XHRcdHRoaXMuc2V0Q2xvdWQoNTAwLCAxMjAwLCA3KTtcblx0XHRcdHRoaXMuc2V0VmlzKDIwMDAsIDQwMCwgJ0lOIEZPRycpO1xuXHRcdFx0dGhpcy5zZXRXaW5kKDAsIDAsIDAsIDApO1xuXHRcdFx0dGhpcy5zZXRUZW1wKDExLCAxMSk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIDM6XG5cdFx0XHR0aGlzLnNldFd4KCdGT0cnKTtcblx0XHRcdHRoaXMuc2V0VmlzKDUwMCwgNTAwLCAnSU4gRk9HJyk7XG5cdFx0XHR0aGlzLnd4LmNsb3VkID0gW107XG5cdFx0XHR0aGlzLnNldFdpbmQoMCwgMCwgMCwgMCk7XG5cdFx0XHR0aGlzLnNldFRlbXAoMTAsIDEwKTtcblx0XHRcdHRoaXMuc2V0R3JvdW5kKCdEQU1QJyk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIDQ6XG5cdFx0Y2FzZSA1OlxuXHRcdGNhc2UgNjpcbiAgXHRcdFx0dGhpcy5nZW5lcmF0ZUNsb3VkKCk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIDc6XG5cdFx0Y2FzZSA4OlxuXHRcdGRlZmF1bHQ6XG5cdFx0XHR0aGlzLnNldFd4KCdDQVZPSycpO1xuXHRcdFx0dGhpcy5zZXRWaXMoOTk5OSwgOTk5OSwgJycpO1xuXHRcdFx0YnJlYWs7XG5cdH1cblx0dGhpcy5wcm9jZXNzQ2xvdWQoKTtcblx0Y29uc29sZS5sb2codGhpcy5hd2lzKCkpO1xuICB9XG5cbiAgcHVibGljIGdlbmVyYXRlQ2xvdWQoKSB7XG4gIFx0bGV0IGxheWVycyA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDMpO1xuXHRsZXQgYWx0cyA9IFsgODAwLCAxNTAwLCAyMDAwLCAyNTAwLCAzMDAwLCAzNTAwLCA0MDAwLCA1MDAwLCA3MDAwIF07XG5cdHRoaXMud3guY2xvdWQgPSBbXTtcblx0bGV0IGNvdmVyYWdlID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogOCk7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgbGF5ZXJzOyBpKyspIHtcblx0XHRsZXQgbGF5ZXJJID0gIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIGFsdHMubGVuZ3RoKTtcblx0XHRsZXQgYmFzZSA9IGFsdHNbbGF5ZXJJXTtcblx0XHRsZXQgZXh0ZW50ID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMzAwMCk7XG5cdFx0bGV0IHRvcHMgPSBiYXNlICsgZXh0ZW50O1xuXHRcdHRoaXMuc2V0Q2xvdWQoYmFzZSwgdG9wcywgY292ZXJhZ2UpO1xuXHRcdGlmICgrK2NvdmVyYWdlID4gOCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fVxuICB9XG5cbiAgb2t0YXNUb1N0cmluZyhvOiBudW1iZXIpIHtcbiAgXHRpZiAobyA+PSA4KSB7XG5cdFx0cmV0dXJuICdvdmVyY2FzdCc7XG5cdH0gZWxzZSBpZiAobyA+IDQpIHtcblx0XHRyZXR1cm4gJ2Jyb2tlbic7XG5cdH0gZWxzZSBpZiAobyA+IDMpIHtcblx0XHRyZXR1cm4gJ3NjYXR0ZXJlZCc7XG5cdH0gZWxzZSBpZiAobyA+IDEpIHtcblx0XHRyZXR1cm4gJ2Zldyc7XG5cdH0gZWxzZSBpZiAobyA+IDApIHtcblx0XHRyZXR1cm4gJ2lzb2xhdGVkJztcblx0fVxuXHRyZXR1cm4gJydcbiAgfVxuXG4gIHB1YmxpYyB2aXNBc1N0cmluZygpOiBzdHJpbmcge1xuICBcdGxldCB2ID0gdGhpcy5zdE51bWJlcih0aGlzLnd4LnZpcy5tYXgpICsgJyBtZXRyZXMnO1xuICBcdGlmICh0aGlzLnd4LnZpcy5tYXggPT09IDk5OTkpIHtcblx0XHR2ID0gJ2dyZWF0ZXIgdGhhbiB0ZW4ga2lsb21ldHJlcyc7XG5cdH0gZWxzZSBpZiAodGhpcy53eC52aXMubWF4ID4gNTAwMCkge1xuXHRcdHYgPSB0aGlzLnN0TnVtYmVyKHRoaXMud3gudmlzLm1heCAvIDEwMDApICsgJyBraWxvbWV0cmVzJztcblx0fVxuXG5cdGlmICh0aGlzLnd4LnZpcy5tYXggPiB0aGlzLnd4LnZpcy5taW4pIHtcblx0XHR2ICs9ICcgcmVkdWNpbmcgdG8gJztcbiAgXHRcdGlmICh0aGlzLnd4LnZpcy5taW4gPT09IDk5OTkpIHtcblx0XHRcdHYgKz0gJyBncmVhdGVyIHRoYW4gdGVuIGtpbG9tZXRyZXMnO1xuXHRcdFx0fSBlbHNlIGlmICh0aGlzLnd4LnZpcy5taW4gPiA1MDAwKSB7XG5cdFx0XHR2ICs9IHRoaXMuc3ROdW1iZXIodGhpcy53eC52aXMubWluIC8gMTAwMCkgKyAnIGtpbG9tZXRyZXMnO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2ICs9IHRoaXMuc3ROdW1iZXIodGhpcy53eC52aXMubWluKSArICcgbWV0cmVzJztcblx0XHR9XG5cdFx0diArPSAnICcgKyB0aGlzLnd4LnZpcy5jb21tZW50O1xuXHR9XG5cdHJldHVybiB2O1xuICAgfVxuXG4gICBzdE51bWJlcihuOiBudW1iZXIpIDogc3RyaW5nIHtcbiAgIFx0aWYgKG4gPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiAnJztcblx0fVxuICAgICAgICBsZXQgZGlnaXRzOiBzdHJpbmdbXSA9IG4udG9TdHJpbmcoKS5zcGxpdCgnJyk7XG4gICBcdGlmIChuID49IDEwMDApIHtcblx0XHRsZXQgbnN0ID0gdGhpcy50b051bWJlcnMoTnVtYmVyKGRpZ2l0c1swXSkpICsgJyB0aG91c2FuZCc7XG5cdFx0aWYgKGRpZ2l0c1sxXSAhPT0gJzAnKSB7XG5cdFx0XHRuc3QgKz0gJyAnICsgdGhpcy50b051bWJlcnMoTnVtYmVyKGRpZ2l0c1sxXSkpICsgJyBodW5kcmVkJztcblx0XHR9XG5cdFx0cmV0dXJuIG5zdDtcblx0XHRcblx0fSBlbHNlIGlmIChuID49IDEwMCkge1xuXHRcdGxldCBuc3QgPSB0aGlzLnRvTnVtYmVycyhOdW1iZXIoZGlnaXRzWzBdKSkgKyAnIGh1bmRyZWQnO1xuXHRcdHJldHVybiBuc3Q7XG5cdH0gZWxzZSB7XG5cdFx0bGV0IG5zdCA9IHRoaXMudG9OdW1iZXJzKG4pO1xuXHR9XG4gIH1cblxuICBwdWJsaWMgYXdpcygpIDogc3RyaW5nIHtcblx0bGV0IHN0ID0gXCJ3aW5kOiBcIiArIHRoaXMud2luZEFzU3RyaW5nKCkgKyBcIiAgUU5IIFwiICsgdGhpcy53eC5xbmggKyBcIiwgVGVtcGVyYXR1cmUgXCIgKyB0aGlzLnd4LnRlbXAgKyBcIiBkZXdwb2ludCBcIiArIHRoaXMud3guZGV3cG9pbnQgKyBcIiwgdmlzaWJpbGl0eSBcIiArIHRoaXMudmlzQXNTdHJpbmcoKSArIFwiIFwiICsgdGhpcy53eC5ncm91bmRDb25kaXRpb24gKyBcIiBjbG91ZCBcIiArIHRoaXMuY2xvdWRBc1N0cmluZygpICsgXCIgXCIgKyB0aGlzLndlYXRoZXJBc1N0cmluZygpICsgXCJcXG5cXG5cIjtcblx0cmV0dXJuIHN0O1xuICB9XG5cbiAgcHJvY2Vzc0Nsb3VkKCkge1xuICBcdGxldCBjOiBhbnkgPSB7fTtcbiAgXHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud3guY2xvdWQubGVuZ3RoOyBpKyspIHtcblx0XHRsZXQgY2xvdWQ6IENsb3VkID0gdGhpcy53eC5jbG91ZFtpXTtcblx0XHRjW2Nsb3VkLmJhc2VdID0gY2xvdWQ7XG5cdH1cblx0dGhpcy53eC5jbG91ZCA9IFtdO1xuXHRsZXQgYWx0cyA9IE9iamVjdC5rZXlzKGMpLnNvcnQoKTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhbHRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dGhpcy53eC5jbG91ZC5wdXNoKGNbYWx0c1tpXV0pO1xuXHR9XG4gIH1cblxuICB3aW5kQXNTdHJpbmcoKTogc3RyaW5nIHtcblx0ICBpZiAodGhpcy53eC53aW5kU3RyZW5ndGggPT09IDApIHtcblx0ICBcdHJldHVybiAnY2FsbSc7XG5cdCAgfSBlbHNlIGlmICh0aGlzLnd4LndpbmRTdHJlbmd0aCA8PSA0KSB7XG5cdCAgXHRyZXR1cm4gJ3ZhcmlhYmxlJztcblx0ICB9XG5cdCAgbGV0IHN0ID0gJyc7XG5cdCAgaWYgKHRoaXMud3gud2luZERpcmVjdGlvblZhcmlhdGlvbiA+IDApIHtcbiAgICAgICAgXHRsZXQgd2luZERpclRvID0gKHRoaXMud3gud2luZERpcmVjdGlvbiArIHRoaXMud3gud2luZERpcmVjdGlvblZhcmlhdGlvbiAlIDM2MCk7XG5cdCAgXHRzdCA9ICd2YXJ5aW5nIGJldHdlZW4gJyArIHRoaXMudG9OdW1iZXJzKHRoaXMud3gud2luZERpcmVjdGlvbikgKyAnIGFuZCAnICsgdGhpcy50b051bWJlcnMod2luZERpclRvKTtcblx0ICB9IGVsc2Uge1xuXHQgIFx0c3QgPSB0aGlzLnRvTnVtYmVycyh0aGlzLnd4LndpbmREaXJlY3Rpb24pO1xuXHQgIH1cblx0ICBzdCArPSAnIGRlZ3JlZXMsICc7XG5cdCAgaWYgKHRoaXMud3gud2luZEd1c3RTdHJlbmd0aCA+IHRoaXMud3gud2luZFN0cmVuZ3RoKSB7XG5cdCAgXHRzdCArPSAnIG1pbmltdW0gJyArIHRoaXMudG9OdW1iZXJzKHRoaXMud3gud2luZFN0cmVuZ3RoKSArICcgbWF4aW11bSAnICsgdGhpcy50b051bWJlcnModGhpcy53eC53aW5kR3VzdFN0cmVuZ3RoKSAgKyAnIGtub3RzJ1xuXHQgIH0gZWxzZSB7XG5cdCAgXHRzdCArPSAnICcgKyB0aGlzLnRvTnVtYmVycyh0aGlzLnd4LndpbmRTdHJlbmd0aCkgKyAnIGtub3RzJ1xuXHQgIH1cblx0ICByZXR1cm4gc3Q7XG4gIH1cblxuICBwdWJsaWMgdmlzQXNTaG9ydGhhbmQoKTogc3RyaW5nIHtcbiAgXHRsZXQgdiA9ICh0aGlzLnd4LnZpcy5tYXgpLnRvU3RyaW5nKCkgKyAnbSc7XG4gIFx0aWYgKHRoaXMud3gudmlzLm1heCA9PT0gOTk5OSkge1xuXHR2ID0gJz4xMGsnO1xuXHR9IGVsc2UgaWYgKHRoaXMud3gudmlzLm1heCA+IDUwMDApIHtcblx0XHR2ID0gKHRoaXMud3gudmlzLm1heCAvIDEwMDApLnRvU3RyaW5nKCkgKyAnayc7XG5cdH1cblxuXHRpZiAodGhpcy53eC52aXMubWF4ID4gdGhpcy53eC52aXMubWluKSB7XG5cdGNvbnNvbGUubG9nKHRoaXMuZm9udGljb24uY3NzLm1kaVsnbWRpLWFkZCddKTtcblx0XHR2ICs9IFwi4oaTXCI7XG4gIFx0XHRpZiAodGhpcy53eC52aXMubWluID09PSA5OTk5KSB7XG5cdFx0XHR2ICs9ICcgPjEwayc7XG5cdFx0fSBlbHNlIGlmICh0aGlzLnd4LnZpcy5taW4gPiA1MDAwKSB7XG5cdFx0XHR2ICs9ICh0aGlzLnd4LnZpcy5taW4gLyAxMDAwKS50b1N0cmluZygpICsgJ2snO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2ICs9IHRoaXMud3gudmlzLm1pbi50b1N0cmluZygpICsgJ20nO1xuXHRcdH1cblx0XHR2ICs9ICcgJyArIHRoaXMud3gudmlzLmNvbW1lbnQudG9Mb3dlckNhc2UoKTtcblx0fVxuXHRyZXR1cm4gdjtcbiAgIH1cblxuICAgcHVibGljIHNob3J0aGFuZChzdDogc3RyaW5nKTogc3RyaW5nIHtcbiAgIFx0c3QgPSBzdC5yZXBsYWNlKC90aHVuZGVyc3Rvcm1zL2lnLCAndHMnKTtcbiAgIFx0c3QgPSBzdC5yZXBsYWNlKC9zaG93ZXJzL2lnLCAnc2h3cnMnKTtcbiAgIFx0c3QgPSBzdC5yZXBsYWNlKC8gb2YgL2lnLCAnICcpO1xuICAgXHRzdCA9IHN0LnJlcGxhY2UoL3JhaW4vaWcsICdybicpO1xuICAgXHRzdCA9IHN0LnJlcGxhY2UoL2luIGFyZWEvaWcsICdhcmVhJyk7XG4gICBcdHN0ID0gc3QucmVwbGFjZSgvZm9nL2lnLCAnZmcnKTtcbiAgIFx0c3QgPSBzdC5yZXBsYWNlKC9zbW9rZS9pZywgJ2Z1Jyk7XG4gICBcdHN0ID0gc3QucmVwbGFjZSgvbWlzdC9pZywgJ2JyJyk7XG4gICBcdHN0ID0gc3QucmVwbGFjZSgvaXNvbGF0ZWQvaWcsICdpc29sJyk7XG4gICBcdHN0ID0gc3QucmVwbGFjZSgvYnJva2VuL2lnLCAnYmtuJyk7XG4gICBcdHN0ID0gc3QucmVwbGFjZSgvc2NhdHRlcmVkL2lnLCAnc2N0Jyk7XG4gICBcdHN0ID0gc3QucmVwbGFjZSgvb3ZlcmNhc3QvaWcsICdvdmMnKTtcblx0cmV0dXJuIHN0O1xuICAgfVxuXG4gIHB1YmxpYyBjbG91ZEFzU2hvcnRoYW5kKCk6IHN0cmluZyB7XG4gIFx0aWYgKHRoaXMud3guY2xvdWQubGVuZ3RoID09PSAwKSB7XG5cdFx0cmV0dXJuICcnO1xuXHRcdH1cbiAgXHRlbHNlIGlmICh0aGlzLmlzQ0FWT0soKSkge1xuXHRcdHJldHVybiAnJztcblx0fSBlbHNlIHtcblx0XHRsZXQgc3QgPSAnJztcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud3guY2xvdWQubGVuZ3RoOyBpKyspIHtcblx0XHRcdGxldCBjbG91ZDogQ2xvdWQgPSB0aGlzLnd4LmNsb3VkW2ldO1xuXHRcdFx0c3QgKz0gJyAnICsgdGhpcy5va3Rhc1RvU3RyaW5nKGNsb3VkLmNvdmVyYWdlKSArICcgJyArIGNsb3VkLmJhc2U7XG5cdFx0fVxuXHRcdHN0ID0gdGhpcy5zaG9ydGhhbmQoc3QpO1xuXHRcdHJldHVybiBzdDtcblx0fVxuICB9XG5cbiAgcHVibGljIHFuaEFzU2hvcnRoYW5kKCk6IHN0cmluZyB7XG4gIFx0cmV0dXJuICdRJyArIHRoaXMucW5oTnVtYmVyLnRvU3RyaW5nKCk7XG4gIH1cblxuICBwdWJsaWMgd3hBc1Nob3J0aGFuZCgpOiBzdHJpbmcge1xuICBcdGxldCB3eCA9ICcnO1xuXHRpZiAodGhpcy53eC53eC5sZW5ndGggPiAwKSB7XG5cdFx0d3ggPSB0aGlzLnd4Lnd4LmpvaW4oJywgJyk7XG5cdH1cblx0d3ggPSB0aGlzLnNob3J0aGFuZCh3eCk7XG5cdGNvbnNvbGUubG9nKHd4KTtcblx0cmV0dXJuIHd4O1xuICB9XG5cbiAgd2luZEFzU2hvcnRoYW5kKCk6IHN0cmluZyB7XG4gIFx0bGV0IHdpbmQgPSAnJ1xuXHQgIGlmICh0aGlzLnd4LndpbmRTdHJlbmd0aCA9PT0gMCkge1xuXHQgIFx0cmV0dXJuICd3bmQgY2xtJztcblx0ICB9IGVsc2UgaWYgKHRoaXMud3gud2luZFN0cmVuZ3RoIDw9IDQpIHtcblx0ICBcdHJldHVybiAnd25kIHZibCc7XG5cdCAgfVxuXHQgIGxldCBzdCA9ICcnO1xuXHQgIGlmICh0aGlzLnd4LndpbmREaXJlY3Rpb25WYXJpYXRpb24gPiAwKSB7XG4gICAgICAgIFx0bGV0IHdpbmREaXJUbyA9ICh0aGlzLnd4LndpbmREaXJlY3Rpb24gKyB0aGlzLnd4LndpbmREaXJlY3Rpb25WYXJpYXRpb24gJSAzNjApO1xuXHQgIFx0c3QgPSB0aGlzLnd4LndpbmREaXJlY3Rpb24gKyAnIC0gJyArIHdpbmREaXJUbztcblx0ICB9IGVsc2Uge1xuXHQgIFx0c3QgPSB0aGlzLnd4LndpbmREaXJlY3Rpb24udG9TdHJpbmcoKTtcblx0ICB9XG5cdCAgc3QgKz0gJy8nO1xuXHQgIGlmICh0aGlzLnd4LndpbmRHdXN0U3RyZW5ndGggPiB0aGlzLnd4LndpbmRTdHJlbmd0aCkge1xuXHQgIFx0c3QgKz0gdGhpcy53eC53aW5kU3RyZW5ndGggKyAnIC0gJyArIHRoaXMud3gud2luZEd1c3RTdHJlbmd0aDtcblx0ICB9IGVsc2Uge1xuXHQgIFx0c3QgKz0gdGhpcy53eC53aW5kU3RyZW5ndGgudG9TdHJpbmcoKTtcblx0ICB9XG5cdCAgcmV0dXJuIHN0O1xuICB9XG5cbiAgaXNDQVZPSygpIDogYm9vbGVhbiB7XG4gIFx0cmV0dXJuIC9DQVZPSy8udGVzdCh0aGlzLndlYXRoZXJBc1N0cmluZygpKTtcbiAgfVxuXG4gIGlzRk9HKCkgOiBib29sZWFuIHtcblx0ICBpZiAoL0ZPRyBJTiBBUkVBLy50ZXN0KHRoaXMud2VhdGhlckFzU3RyaW5nKCkpKSB7XG5cdCAgXHRyZXR1cm4gZmFsc2U7XG5cdCAgfTtcbiAgXHQgIHJldHVybiAvRk9HLy50ZXN0KHRoaXMud2VhdGhlckFzU3RyaW5nKCkpO1xuICB9XG5cbiAgaXNSVkZSKCkgOiBib29sZWFuIHtcbiAgXHRpZiAoKHRoaXMud3gudmlzLm1pbiA8PSA1MDAwKSAmJiAodGhpcy53eC52aXMubWluID49IDE2MDApKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0cmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaXNWRlIoKSA6IGJvb2xlYW4ge1xuICBcdGlmICh0aGlzLmlzUlZGUigpKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cbiAgXHRpZiAodGhpcy53eC52aXMubWluIDw9IDUwMDApIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0bGV0IGNsb3VkcyA9IHRoaXMud3guY2xvdWQ7XG5cdGxldCBjb3ZlcmFnZSA9IDA7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgY2xvdWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0bGV0IGMgPSBjbG91ZHNbaV07XG5cdFx0aWYgKGMuYmFzZSA8IDE4MDApIHtcblx0XHRcdGNvdmVyYWdlICs9IGMuY292ZXJhZ2U7XG5cdFx0fVxuXHR9XG5cdGlmIChjb3ZlcmFnZSA+PSAyKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHJldHVybiB0cnVlO1xuICB9XG4gIFxuICBpc0lNQygpIDogYm9vbGVhbiB7XG4gIFx0aWYgKHRoaXMud3gudmlzLm1pbiA8PSA1MDAwKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0bGV0IGNsb3VkcyA9IHRoaXMud3guY2xvdWQ7XG5cdGxldCBjb3ZlcmFnZSA9IDA7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgY2xvdWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0bGV0IGMgPSBjbG91ZHNbaV07XG5cdFx0aWYgKGMuYmFzZSA8IDE4MDApIHtcblx0XHRcdGNvdmVyYWdlICs9IGMuY292ZXJhZ2U7XG5cdFx0fVxuXHR9XG5cdGlmIChjb3ZlcmFnZSA+PSA3KSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0cmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY2xvdWRBc1N0cmluZygpIDogc3RyaW5nIHtcbiAgXHRpZiAodGhpcy53eC5jbG91ZC5sZW5ndGggPT09IDApIHtcblx0XHRyZXR1cm4gJ25pbCc7XG5cdH0gZWxzZSB7XG5cdFx0bGV0IHN0ID0gJyc7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnd4LmNsb3VkLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRsZXQgY2xvdWQ6IENsb3VkID0gdGhpcy53eC5jbG91ZFtpXTtcblx0XHRcdHN0ICs9ICcgJyArIHRoaXMub2t0YXNUb1N0cmluZyhjbG91ZC5jb3ZlcmFnZSkgKyAnICcgKyB0aGlzLnN0TnVtYmVyKGNsb3VkLmJhc2UpO1xuXHRcdH1cblx0XHRyZXR1cm4gc3Q7XG5cdH1cbiAgfVxuXG4gIHdlYXRoZXJBc1N0cmluZygpIDogc3RyaW5nIHtcbiAgXHRpZiAodGhpcy53eC53eC5sZW5ndGggPT09IDApIHtcblx0XHRyZXR1cm4gJyc7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIHRoaXMud3gud3guam9pbignLCAnKTtcblx0fVxuICB9XG5cbiAgIHB1YmxpYyB0b051bWJlcnMobjogbnVtYmVyKSA6IHN0cmluZyB7XG4gICBcdGxldCBtYXAgPSB7XG5cdFx0JzAnOiAnemVybycsXG5cdFx0JzEnOiAnd3VuJyxcblx0XHQnMic6ICd0d28nLFxuXHRcdCczJzogJ3RocmVlJyxcblx0XHQnNCc6ICdmb3JlJyxcblx0XHQnNSc6ICdmaWZlJyxcblx0XHQnNic6ICdzaXgnLFxuXHRcdCc3JzogJ3NlZmZlbicsXG5cdFx0JzgnOiAnZWlnaHQnLFxuXHRcdCc5JzogJ25pbmVyJyxcblx0XHR9O1xuICAgXHRsZXQgbnN0ID0gbi50b1N0cmluZygpO1xuXHRsZXQgZCA9IG5zdC5zcGxpdCgnJyk7XG5cdGxldCByZXNwb25zZTogc3RyaW5nW10gPSBbXTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBkLmxlbmd0aDsgaSsrKSB7XG5cdFx0bGV0IGRzdCA9IGRbaV07XG5cdFx0bGV0IGRQaG9uID0gbWFwW2RzdF07XG5cdFx0aWYgKGRQaG9uICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdHJlc3BvbnNlLnB1c2goZFBob24pO1xuXHRcdH0gZWxzZSB7XG5cdFx0cmVzcG9uc2UucHVzaChkc3QpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzcG9uc2Uuam9pbignICcpO1xuICAgfVxuXG5cbn1cbiJdfQ==