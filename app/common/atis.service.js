"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var weather_service_1 = require("../weather/weather.service");
var question_service_1 = require("../common/question.service");
var speak_service_1 = require("../common/speak.service");
var aerodromes_service_1 = require("../aerodromes/aerodromes.service");
var CommonAtisService = /** @class */ (function () {
    function CommonAtisService(weatherService, speakService, questionService, aerodromesService) {
        this.weatherService = weatherService;
        this.speakService = speakService;
        this.questionService = questionService;
        this.aerodromesService = aerodromesService;
        this.ident = '';
        this.approach = '';
        this.currentAtis = {};
    }
    CommonAtisService.prototype.getCurrentIdent = function () {
        return this.ident;
    };
    CommonAtisService.prototype.shorthand = function (st) {
        st = st.replace(/instrument/ig, 'inst');
        st = st.replace(/approach/ig, 'app');
        return st;
    };
    CommonAtisService.prototype.getCurrentApproach = function () {
        return this.shorthand(this.approach);
    };
    CommonAtisService.prototype.getCurrentTemp = function () {
        return this.weatherService.getCurrentTemp();
    };
    CommonAtisService.prototype.getCurrentRunways = function () {
        var rwys = this.aerodromesService.getRunwayShorthand();
        return rwys;
    };
    CommonAtisService.prototype.getCurrentWind = function () {
        return this.weatherService.windAsShorthand();
    };
    CommonAtisService.prototype.getCurrentVis = function () {
        return this.weatherService.visAsShorthand();
    };
    CommonAtisService.prototype.getCurrentWeather = function () {
        return this.weatherService.wxAsShorthand();
    };
    CommonAtisService.prototype.getCurrentCloud = function () {
        return this.weatherService.cloudAsShorthand();
    };
    CommonAtisService.prototype.getCurrentQNH = function () {
        return this.weatherService.qnhAsShorthand();
    };
    CommonAtisService.prototype.getCurrentOther = function () {
        return this.aerodromesService.getCurrentOther();
    };
    CommonAtisService.prototype.getShorthandAtis = function () {
        return this.shorthandAtis(this.currentAtis);
    };
    CommonAtisService.prototype.shorthandAtis = function (atis) {
        var shorthand = [];
        var bit = atis.approach;
        if (bit !== '') {
            bit = bit.replace(/instrument/ig, 'inst');
            bit = bit.replace(/approach/ig, 'app');
            bit = bit.replace(/visual/ig, 'vis');
            bit = bit.replace(/independent/ig, 'ind');
            shorthand.push('exp ' + bit);
        }
        bit = atis.runways;
        bit = bit.replace(/ and /ig, '+');
        bit = bit.replace(/ for /ig, '');
        bit = bit.replace(/arrivals/ig, 'ar');
        bit = bit.replace(/departures/ig, 'dp');
        bit = bit.replace(/circuits/ig, 'ccts');
        bit = bit.replace(/circuit training/ig, 'ccts');
        shorthand.push(bit);
        bit = atis.runwaysSurface;
        bit = bit.replace(/water patches/ig, 'water');
        shorthand.push(bit);
        bit = atis.holding;
        shorthand.push(bit);
        bit = atis.runwayOps;
        bit = bit.replace(/restricted/ig, 'res');
        bit = bit.replace(/operations/ig, 'ops');
        bit = bit.replace(/special/ig, 'spec');
        bit = bit.replace(/procedures/ig, 'procs');
        bit = bit.replace(/apply/ig, '');
        bit = bit.replace(/control zone closed for vfr ops/ig, 'v̶f̶r̶');
        shorthand.push(bit);
        bit = atis.wind;
        bit = bit.replace(/variable/ig, 'vbl');
        bit = bit.replace(/varying between/ig, '');
        bit = bit.replace(/ and /ig, '-');
        bit = bit.replace(/degrees/ig, '');
        bit = bit.replace(/knots/ig, 'kts');
        bit = bit.replace(/minimum/ig, '');
        bit = bit.replace(/maximum/ig, '-');
        bit = bit.replace(/\s*,\s*/ig, '/');
        bit = bit.replace(/\s+/ig, ' ');
        shorthand.push(bit);
        bit = atis.xwind;
        bit = bit.replace(/crosswind/ig, "xw");
        shorthand.push(bit);
        bit = atis.twind;
        bit = bit.replace(/tailwind/ig, "tw");
        shorthand.push(bit);
        if (!atis.weather.match(/CAVOK/)) {
            bit = atis.visibility;
            bit = bit.replace(/greater than 10 kilometres/ig, ">10km");
            bit = bit.replace(/reducing to/ig, "↓");
            bit = bit.replace(/kilometres/ig, "km");
            bit = bit.replace(/metres/ig, "m");
            shorthand.push(bit);
        }
        bit = atis.weather;
        shorthand.push(bit);
        if (!atis.weather.match(/CAVOK/)) {
            bit = atis.cloud;
            bit = bit.replace(/broken/ig, "bkn");
            bit = bit.replace(/overcast/ig, "ovc");
            bit = bit.replace(/scattered/ig, "sct");
            bit = bit.replace(/isolated/ig, "iso");
            shorthand.push('CLD ' + bit);
        }
        bit = atis.temp;
        shorthand.push('T' + bit);
        bit = atis.qnh;
        shorthand.push('Q' + bit);
        var s = shorthand.join("\n");
        s = s.replace(/maximum/ig, 'max');
        s = s.replace(/minimum/ig, 'max');
        s = s.replace(/knots/ig, 'kts');
        s = s.replace(/runway/ig, 'rwy');
        s = s.replace(/showers/ig, 'shwrs ');
        s = s.replace(/thunderstorms/ig, 'TS ');
        s = s.replace(/rain/ig, 'ra ');
        s = s.replace(/ of /ig, '');
        s = s.replace(/ in area/ig, ' area');
        s = s.replace(/-x-/g, '');
        s = s.replace(/\n\n+/g, "\n");
        bit = bit.replace(/\s+/ig, ' ');
        return s;
    };
    CommonAtisService.prototype.generateAtisNew = function (level) {
        var wx = this.weatherService.createNewWeather();
        var adName = this.aerodromesService.getName();
        this.aerodromesService.setWind(wx.windDirection, wx.windStrength);
        var atis = {
            'ad': adName,
            'ident': this.getIdent(),
            'time': '0000',
            'approach': this.aerodromesService.getApproach(),
            'runways': this.aerodromesService.getActiveRunwaysAsText(),
            'runwaysSurface': this.aerodromesService.getRunwaySurface(),
            'holding': this.aerodromesService.getHolding(),
            'runwayOps': this.aerodromesService.getRunwayOperations(),
            'wind': this.weatherService.windAsText(),
            'xwind': this.aerodromesService.getMaxXwindAsText(),
            'twind': this.aerodromesService.getMaxTwindAsText(),
            'visibility': this.weatherService.visAsText(),
            'weather': this.weatherService.weatherAsString(),
            'cloud': this.weatherService.cloudAsText(),
            'temp': wx.temp,
            'qnh': this.weatherService.qnhAsText(),
            'contact': this.aerodromesService.servicesAsString(),
            'shorthand': '',
            'questions': []
        };
        atis.shorthand = this.shorthandAtis(atis);
        this.makeAtisQuestions(atis);
        console.log(atis);
        this.currentAtis = atis;
    };
    CommonAtisService.prototype.makeAtisQuestions = function (atis) {
        this.questionService.addQuestion('what information have you received?', atis.ident, ['alpha', 'bravo', 'charlie', 'delta', 'echo', 'foxtrot', 'golf', 'hotel'], '');
        if (atis.approach !== '') {
            this.questionService.addQuestion('If arriving, what sort of approach would you expect?', atis.approach, ['visual', 'ils', 'special vfr', 'standard', 'cannot be determined'], '');
        }
        this.questionService.addQuestion('What runway would you expect for arrival?', atis.runways, ['06', '34', '11L', '30', '28', '29C or 29R'], '');
        this.questionService.addQuestion('What is the wind?', atis.wind, ['270/10', '220/10', '120-140/5-10', 'variable 5', 'calm'], '');
        if (atis.xwind !== '') {
            this.questionService.addQuestion('What is the maximum cross wind reported?', atis.xwind, ['0', '5', '7', '10', '12', '15'], '');
        }
        if (atis.twind !== '') {
            this.questionService.addQuestion('What is the maximum tail wind reported?', atis.twind, ['0', '1', '2', '3', '4', '5'], '');
        }
        if (atis.weather === 'CAVOK') {
            this.questionService.addQuestion('Is there cloud above 5000 feet?', 'possibly yes', ['definitely yes', 'definitely no'], "CAVOK means no cloud below 5000' but there can be cloud above this");
            this.questionService.addQuestion('What is the visibility?', '10km or greater', ['2000m', '5000m', '8km'], "CAVOK means visibility must be 10km or greater");
            this.questionService.addQuestion('Could there be Towering Cumulus above the aerodrome?', 'definitely no', ['definitely yes', 'possibly yes'], "there must be no towering Cumulus if CAVOK");
            this.questionService.addQuestion('Could there be Stratocumulus above the aerodrome?', 'possibly yes', ['definitely no', 'definitely yes'], "providing the cloud is above 5000' it can still be CAVOK");
        }
        else {
            this.questionService.addQuestion('What is the visibility?', atis.visibility, ['800 metres', '2000 metres', '5000 metres', '8 kilometres', 'greater than 10 kilometres'], "");
            this.questionService.addQuestion('What is the reported cloud?', atis.cloud, ['broken 500', 'scattered 1500', 'few 2500', 'overcast 3000'], "");
            this.questionService.addQuestion('Could there be unreported cloud at 6000?', 'yes', ['no'], "ATIS will only report cloud below 5000' (unless CB or TCU)");
        }
        this.questionService.addQuestion('What is the temperature?', atis.temp.toString(), ['10', '13', '14', '15', '20', '22', '23', '25', '28', '30', '32'], "");
        this.questionService.addQuestion('What is the QNH?', atis.qnh, ['1001', '1003', '1004', '1005', '1010', '1012', '1013', '1014', '1015', '1017', '1020'], "");
    };
    CommonAtisService.prototype.windAsWords = function (st) {
        st = st.replace(/L\b/g, ' left');
        st = st.replace(/R\b/g, ' right');
        st = st.replace(/C\b/g, ' centre');
        st = st.replace(/0/g, 'zero ');
        st = st.replace(/1/g, 'one ');
        st = st.replace(/2/g, 'two ');
        st = st.replace(/3/g, 'three ');
        st = st.replace(/4/g, 'four ');
        st = st.replace(/5/g, 'five ');
        st = st.replace(/6/g, 'six ');
        st = st.replace(/7/g, 'seven ');
        st = st.replace(/8/g, 'eight ');
        st = st.replace(/9/g, 'nine ');
        return st;
    };
    CommonAtisService.prototype.surfaceAsWords = function (st) {
        st = st.replace(/WET/ig, 'runway wet');
        st = st.replace(/DAMP/ig, 'runway wet');
        st = st.replace(/FLOODED/ig, 'runway flooded');
        st = st.replace(/WATER PATCHES/ig, 'water patches on runway');
        return st;
    };
    CommonAtisService.prototype.visAsWords = function (st) {
        st = st.replace(/ 10 /g, ' ten ');
        st = st.replace(/000 /g, 'thousand ');
        st = st.replace(/00 /g, 'hundred ');
        st = this.windAsWords(st);
        return st;
    };
    CommonAtisService.prototype.approachAsWords = function (st) {
        st = st.replace(/ILS/g, 'I L S');
        return st;
    };
    CommonAtisService.prototype.runwaysAsWords = function (st) {
        st = st.replace(/L/g, ' left');
        st = st.replace(/R/g, ' right');
        st = st.replace(/C/g, ' centre');
        st = st.replace(/0/g, ' zero');
        st = st.replace(/1/g, ' one');
        st = st.replace(/2/g, ' two');
        st = st.replace(/3/g, ' three');
        st = st.replace(/4/g, ' four');
        st = st.replace(/5/g, ' five');
        st = st.replace(/6/g, ' six');
        st = st.replace(/7/g, ' seven');
        st = st.replace(/8/g, ' eight');
        st = st.replace(/9/g, ' nine');
        st = st.replace(/\./g, ' decimal');
        return st;
    };
    CommonAtisService.prototype.atisAsWords = function () {
        var aLines = [];
        var atis = this.currentAtis;
        aLines.push(atis.ad + ' terminal information ' + atis.ident);
        if (atis.approach !== '') {
            aLines.push('expect ' + this.approachAsWords(atis.approach));
        }
        aLines.push('runway ' + this.runwaysAsWords(atis.runways));
        if (atis.runwaysSurface !== '') {
            aLines.push(this.surfaceAsWords(atis.runwaysSurface));
        }
        if (atis.holding !== '') {
            aLines.push(atis.holding);
        }
        if (atis.runwayOps !== '') {
            aLines.push(atis.runwayOps);
        }
        aLines.push('wind ' + this.windAsWords(atis.wind));
        if (atis.xwind !== '') {
            aLines.push(this.windAsWords(atis.xwind));
        }
        if (atis.twind !== '') {
            aLines.push(this.windAsWords(atis.twind));
        }
        if (atis.weather !== 'CAVOK') {
            aLines.push('visibility ' + this.visAsWords(atis.visibility));
        }
        if (atis.weather !== '') {
            aLines.push('weather ' + this.visAsWords(atis.weather));
        }
        if (atis.weather !== 'CAVOK') {
            aLines.push('cloud ' + atis.cloud);
        }
        aLines.push('temperature ' + this.windAsWords(atis.temp.toString()));
        aLines.push('Q N H ' + this.windAsWords(atis.qnh));
        aLines.push('on first contact with ' + atis.ad + ' ' + atis.contact + ' notify receipt of information ' + atis.ident);
        var text = aLines.join(',');
        text = text.replace(/-x-/g, '');
        text = text.replace(/,,+/g, ',');
        return text;
    };
    CommonAtisService.prototype.generateAtis = function (level) {
        this.generateAtisNew(level);
        var words = this.atisAsWords();
        console.log(words);
        return words;
    };
    CommonAtisService.prototype.getIdent = function () {
        var chIndex = Math.round(Math.random() * 7);
        var ch = String.fromCharCode(chIndex + 65);
        this.ident = ch;
        return this.speakService.alphabet(ch);
    };
    CommonAtisService.prototype.toNumbers = function (n) {
        var map = {
            '0': 'zero',
            '1': 'wun',
            '2': 'two',
            '3': 'three',
            '4': 'fore',
            '5': 'fife',
            '6': 'six',
            '7': 'seffen',
            '8': 'eight',
            '9': 'niner',
        };
        var nst = n.toString();
        var d = nst.split('');
        var response = [];
        for (var i = 0; i < d.length; i++) {
            var dst = d[i];
            var dPhon = map[dst];
            if (dPhon !== undefined) {
                response.push(dPhon);
            }
            else {
                response.push(dst);
            }
        }
        return response.join(' ');
    };
    CommonAtisService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [weather_service_1.WeatherService,
            speak_service_1.CommonSpeakService,
            question_service_1.CommonQuestionService,
            aerodromes_service_1.AerodromesService])
    ], CommonAtisService);
    return CommonAtisService;
}());
exports.CommonAtisService = CommonAtisService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXRpcy5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXRpcy5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQTJDO0FBQzNDLDhEQUE0RDtBQUU1RCwrREFBbUU7QUFDbkUseURBQTZEO0FBQzdELHVFQUFxRTtBQU1yRTtJQU9FLDJCQUFvQixjQUE4QixFQUN6QyxZQUFnQyxFQUNoQyxlQUFzQyxFQUN0QyxpQkFBb0M7UUFIekIsbUJBQWMsR0FBZCxjQUFjLENBQWdCO1FBQ3pDLGlCQUFZLEdBQVosWUFBWSxDQUFvQjtRQUNoQyxvQkFBZSxHQUFmLGVBQWUsQ0FBdUI7UUFDdEMsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFtQjtRQVJyQyxVQUFLLEdBQVcsRUFBRSxDQUFDO1FBQ25CLGFBQVEsR0FBVyxFQUFFLENBQUM7UUFDdEIsZ0JBQVcsR0FBa0IsRUFBUyxDQUFDO0lBTUUsQ0FBQztJQUUzQywyQ0FBZSxHQUF0QjtRQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ25CLENBQUM7SUFFTyxxQ0FBUyxHQUFqQixVQUFrQixFQUFVO1FBQzNCLEVBQUUsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUN4QyxFQUFFLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDckMsTUFBTSxDQUFDLEVBQUUsQ0FBQztJQUNYLENBQUM7SUFFTSw4Q0FBa0IsR0FBekI7UUFDQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVNLDBDQUFjLEdBQXJCO1FBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDN0MsQ0FBQztJQUVNLDZDQUFpQixHQUF4QjtRQUNDLElBQUksSUFBSSxHQUFHLElBQUks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QUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNmLElBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNyQixFQUFFLENBQUMsQ0FBQyxLQUFLLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFDekIsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN0QixDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ1IsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNuQixDQUFDO1FBQ0YsQ0FBQztRQUNELE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUF2WFksaUJBQWlCO1FBRDdCLGlCQUFVLEVBQUU7eUNBUXlCLGdDQUFjO1lBQzNCLGtDQUFrQjtZQUNmLHdDQUFxQjtZQUNuQixzQ0FBaUI7T0FWbEMsaUJBQWlCLENBeVg3QjtJQUFELHdCQUFDO0NBQUEsQUF6WEQsSUF5WEM7QUF6WFksOENBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgV2VhdGhlclNlcnZpY2UgfSBmcm9tICcuLi93ZWF0aGVyL3dlYXRoZXIuc2VydmljZSc7XG5pbXBvcnQgeyBXZWF0aGVyLCBDbG91ZCB9IGZyb20gJy4uL3dlYXRoZXIvd2VhdGhlci5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgQ29tbW9uUXVlc3Rpb25TZXJ2aWNlIH0gZnJvbSBcIi4uL2NvbW1vbi9xdWVzdGlvbi5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBDb21tb25TcGVha1NlcnZpY2UgfSBmcm9tIFwiLi4vY29tbW9uL3NwZWFrLnNlcnZpY2VcIjtcbmltcG9ydCB7IEFlcm9kcm9tZXNTZXJ2aWNlIH0gZnJvbSBcIi4uL2Flcm9kcm9tZXMvYWVyb2Ryb21lcy5zZXJ2aWNlXCI7XG5cbmltcG9ydCB7IEF0aXNJbnRlcmZhY2UgfSBmcm9tIFwiLi9hdGlzLmludGVyZmFjZVwiO1xuaW1wb3J0IHsgUXVlc3Rpb25JbnRlcmZhY2UgfSBmcm9tIFwiLi9xdWVzdGlvbi5pbnRlcmZhY2VcIjtcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIENvbW1vbkF0aXNTZXJ2aWNlIHtcblxuICBwcml2YXRlIGlkZW50OiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBhcHByb2FjaDogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgY3VycmVudEF0aXM6IEF0aXNJbnRlcmZhY2UgPSB7fSBhcyBhbnk7XG5cblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHdlYXRoZXJTZXJ2aWNlOiBXZWF0aGVyU2VydmljZSxcblx0ICBwcml2YXRlIHNwZWFrU2VydmljZTogQ29tbW9uU3BlYWtTZXJ2aWNlLFxuXHQgIHByaXZhdGUgcXVlc3Rpb25TZXJ2aWNlOiBDb21tb25RdWVzdGlvblNlcnZpY2UsXG5cdCAgcHJpdmF0ZSBhZXJvZHJvbWVzU2VydmljZTogQWVyb2Ryb21lc1NlcnZpY2UpIHsgfVxuXG4gIHB1YmxpYyBnZXRDdXJyZW50SWRlbnQoKSB7XG5cdCAgcmV0dXJuIHRoaXMuaWRlbnQ7XG4gIH0gIFxuXG4gIHByaXZhdGUgc2hvcnRoYW5kKHN0OiBzdHJpbmcpOiBzdHJpbmcge1xuICBcdHN0ID0gc3QucmVwbGFjZSgvaW5zdHJ1bWVudC9pZywgJ2luc3QnKTtcbiAgXHRzdCA9IHN0LnJlcGxhY2UoL2FwcHJvYWNoL2lnLCAnYXBwJyk7XG4gIFx0cmV0dXJuIHN0O1xuICB9XG5cbiAgcHVibGljIGdldEN1cnJlbnRBcHByb2FjaCgpIHtcblx0ICByZXR1cm4gdGhpcy5zaG9ydGhhbmQodGhpcy5hcHByb2FjaCk7XG4gIH0gIFxuXG4gIHB1YmxpYyBnZXRDdXJyZW50VGVtcCgpIHtcblx0ICByZXR1cm4gdGhpcy53ZWF0aGVyU2VydmljZS5nZXRDdXJyZW50VGVtcCgpO1xuICB9ICBcblxuICBwdWJsaWMgZ2V0Q3VycmVudFJ1bndheXMoKSB7XG4gIFx0bGV0IHJ3eXMgPSB0aGlzLmFlcm9kcm9tZXNTZXJ2aWNlLmdldFJ1bndheVNob3J0aGFuZCgpO1xuXHRyZXR1cm4gcnd5cztcbiAgfSAgXG5cbiAgcHVibGljIGdldEN1cnJlbnRXaW5kKCkge1xuICBcdHJldHVybiB0aGlzLndlYXRoZXJTZXJ2aWNlLndpbmRBc1Nob3J0aGFuZCgpO1xuICB9XG5cbiAgcHVibGljIGdldEN1cnJlbnRWaXMoKSB7XG4gIFx0cmV0dXJuIHRoaXMud2VhdGhlclNlcnZpY2UudmlzQXNTaG9ydGhhbmQoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDdXJyZW50V2VhdGhlcigpIHtcbiAgXHRyZXR1cm4gdGhpcy53ZWF0aGVyU2VydmljZS53eEFzU2hvcnRoYW5kKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q3VycmVudENsb3VkKCkge1xuICBcdHJldHVybiB0aGlzLndlYXRoZXJTZXJ2aWNlLmNsb3VkQXNTaG9ydGhhbmQoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDdXJyZW50UU5IKCkge1xuICBcdHJldHVybiB0aGlzLndlYXRoZXJTZXJ2aWNlLnFuaEFzU2hvcnRoYW5kKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q3VycmVudE90aGVyKCkge1xuICBcdHJldHVybiB0aGlzLmFlcm9kcm9tZXNTZXJ2aWNlLmdldEN1cnJlbnRPdGhlcigpO1xuICB9XG5cbiAgcHVibGljIGdldFNob3J0aGFuZEF0aXMoKSB7XG4gIFx0cmV0dXJuIHRoaXMuc2hvcnRoYW5kQXRpcyh0aGlzLmN1cnJlbnRBdGlzKTtcbiAgfVxuXG4gIHB1YmxpYyBzaG9ydGhhbmRBdGlzKGF0aXM6IEF0aXNJbnRlcmZhY2UpOiBzdHJpbmcge1xuICBcdGxldCBzaG9ydGhhbmQ6IHN0cmluZ1tdID0gW107XG4gIFx0bGV0IGJpdCA9IGF0aXMuYXBwcm9hY2g7XG5cdGlmIChiaXQgIT09ICcnKSB7XG5cdFx0Yml0ID0gYml0LnJlcGxhY2UoL2luc3RydW1lbnQvaWcsICdpbnN0Jyk7XG5cdFx0Yml0ID0gYml0LnJlcGxhY2UoL2FwcHJvYWNoL2lnLCAnYXBwJyk7XG5cdFx0Yml0ID0gYml0LnJlcGxhY2UoL3Zpc3VhbC9pZywgJ3ZpcycpO1xuXHRcdGJpdCA9IGJpdC5yZXBsYWNlKC9pbmRlcGVuZGVudC9pZywgJ2luZCcpO1xuXHRcdHNob3J0aGFuZC5wdXNoKCdleHAgJyArIGJpdCk7XG5cdH1cblxuXHRiaXQgPSBhdGlzLnJ1bndheXM7XG5cdGJpdCA9IGJpdC5yZXBsYWNlKC8gYW5kIC9pZywgJysnKTtcblx0Yml0ID0gYml0LnJlcGxhY2UoLyBmb3IgL2lnLCAnJyk7XG5cdGJpdCA9IGJpdC5yZXBsYWNlKC9hcnJpdmFscy9pZywgJ2FyJyk7XG5cdGJpdCA9IGJpdC5yZXBsYWNlKC9kZXBhcnR1cmVzL2lnLCAnZHAnKTtcblx0Yml0ID0gYml0LnJlcGxhY2UoL2NpcmN1aXRzL2lnLCAnY2N0cycpO1xuXHRiaXQgPSBiaXQucmVwbGFjZSgvY2lyY3VpdCB0cmFpbmluZy9pZywgJ2NjdHMnKTtcblx0c2hvcnRoYW5kLnB1c2goYml0KTtcblxuXHRiaXQgPSBhdGlzLnJ1bndheXNTdXJmYWNlO1xuXHRiaXQgPSBiaXQucmVwbGFjZSgvd2F0ZXIgcGF0Y2hlcy9pZywgJ3dhdGVyJyk7XG5cdHNob3J0aGFuZC5wdXNoKGJpdCk7XG5cblx0Yml0ID0gYXRpcy5ob2xkaW5nO1xuXHRzaG9ydGhhbmQucHVzaChiaXQpO1xuXG5cdGJpdCA9IGF0aXMucnVud2F5T3BzO1xuXHRiaXQgPSBiaXQucmVwbGFjZSgvcmVzdHJpY3RlZC9pZywgJ3JlcycpO1xuXHRiaXQgPSBiaXQucmVwbGFjZSgvb3BlcmF0aW9ucy9pZywgJ29wcycpO1xuXHRiaXQgPSBiaXQucmVwbGFjZSgvc3BlY2lhbC9pZywgJ3NwZWMnKTtcblx0Yml0ID0gYml0LnJlcGxhY2UoL3Byb2NlZHVyZXMvaWcsICdwcm9jcycpO1xuXHRiaXQgPSBiaXQucmVwbGFjZSgvYXBwbHkvaWcsICcnKTtcblx0Yml0ID0gYml0LnJlcGxhY2UoL2NvbnRyb2wgem9uZSBjbG9zZWQgZm9yIHZmciBvcHMvaWcsICd2zLZmzLZyzLYnKTtcblx0c2hvcnRoYW5kLnB1c2goYml0KTtcblxuXHRiaXQgPSBhdGlzLndpbmQ7XG5cdGJpdCA9IGJpdC5yZXBsYWNlKC92YXJpYWJsZS9pZywgJ3ZibCcpO1xuXHRiaXQgPSBiaXQucmVwbGFjZSgvdmFyeWluZyBiZXR3ZWVuL2lnLCAnJyk7XG5cdGJpdCA9IGJpdC5yZXBsYWNlKC8gYW5kIC9pZywgJy0nKTtcblx0Yml0ID0gYml0LnJlcGxhY2UoL2RlZ3JlZXMvaWcsICcnKTtcblx0Yml0ID0gYml0LnJlcGxhY2UoL2tub3RzL2lnLCAna3RzJyk7XG5cdGJpdCA9IGJpdC5yZXBsYWNlKC9taW5pbXVtL2lnLCAnJyk7XG5cdGJpdCA9IGJpdC5yZXBsYWNlKC9tYXhpbXVtL2lnLCAnLScpO1xuXHRiaXQgPSBiaXQucmVwbGFjZSgvXFxzKixcXHMqL2lnLCAnLycpO1xuXHRiaXQgPSBiaXQucmVwbGFjZSgvXFxzKy9pZywgJyAnKTtcblx0c2hvcnRoYW5kLnB1c2goYml0KTtcblxuXHRiaXQgPSBhdGlzLnh3aW5kO1xuXHRiaXQgPSBiaXQucmVwbGFjZSgvY3Jvc3N3aW5kL2lnLCBcInh3XCIpO1xuXHRzaG9ydGhhbmQucHVzaChiaXQpO1xuXG5cdGJpdCA9IGF0aXMudHdpbmQ7XG5cdGJpdCA9IGJpdC5yZXBsYWNlKC90YWlsd2luZC9pZywgXCJ0d1wiKTtcblx0c2hvcnRoYW5kLnB1c2goYml0KTtcblxuXHRpZiAoISBhdGlzLndlYXRoZXIubWF0Y2goL0NBVk9LLykpIHtcblx0XHRiaXQgPSBhdGlzLnZpc2liaWxpdHk7XG5cdFx0Yml0ID0gYml0LnJlcGxhY2UoL2dyZWF0ZXIgdGhhbiAxMCBraWxvbWV0cmVzL2lnLCBcIj4xMGttXCIpO1xuXHRcdGJpdCA9IGJpdC5yZXBsYWNlKC9yZWR1Y2luZyB0by9pZywgXCLihpNcIik7XG5cdFx0Yml0ID0gYml0LnJlcGxhY2UoL2tpbG9tZXRyZXMvaWcsIFwia21cIik7XG5cdFx0Yml0ID0gYml0LnJlcGxhY2UoL21ldHJlcy9pZywgXCJtXCIpO1xuXHRcdHNob3J0aGFuZC5wdXNoKGJpdCk7XG5cdH1cblxuXHRiaXQgPSBhdGlzLndlYXRoZXI7XG5cdHNob3J0aGFuZC5wdXNoKGJpdCk7XG5cblx0aWYgKCEgYXRpcy53ZWF0aGVyLm1hdGNoKC9DQVZPSy8pKSB7XG5cdFx0Yml0ID0gYXRpcy5jbG91ZDtcblx0XHRiaXQgPSBiaXQucmVwbGFjZSgvYnJva2VuL2lnLCBcImJrblwiKTtcblx0XHRiaXQgPSBiaXQucmVwbGFjZSgvb3ZlcmNhc3QvaWcsIFwib3ZjXCIpO1xuXHRcdGJpdCA9IGJpdC5yZXBsYWNlKC9zY2F0dGVyZWQvaWcsIFwic2N0XCIpO1xuXHRcdGJpdCA9IGJpdC5yZXBsYWNlKC9pc29sYXRlZC9pZywgXCJpc29cIik7XG5cdFx0c2hvcnRoYW5kLnB1c2goJ0NMRCAnICsgYml0KTtcblx0fVxuXG5cdGJpdCA9IGF0aXMudGVtcDtcblx0c2hvcnRoYW5kLnB1c2goJ1QnK2JpdCk7XG5cblx0Yml0ID0gYXRpcy5xbmg7XG5cdHNob3J0aGFuZC5wdXNoKCdRJytiaXQpO1xuXG5cdGxldCBzID0gc2hvcnRoYW5kLmpvaW4oXCJcXG5cIik7XG5cdHMgPSBzLnJlcGxhY2UoL21heGltdW0vaWcsICdtYXgnKTtcblx0cyA9IHMucmVwbGFjZSgvbWluaW11bS9pZywgJ21heCcpO1xuXHRzID0gcy5yZXBsYWNlKC9rbm90cy9pZywgJ2t0cycpO1xuXHRzID0gcy5yZXBsYWNlKC9ydW53YXkvaWcsICdyd3knKTtcblx0cyA9IHMucmVwbGFjZSgvc2hvd2Vycy9pZywgJ3Nod3JzICcpO1xuXHRzID0gcy5yZXBsYWNlKC90aHVuZGVyc3Rvcm1zL2lnLCAnVFMgJyk7XG5cdHMgPSBzLnJlcGxhY2UoL3JhaW4vaWcsICdyYSAnKTtcblx0cyA9IHMucmVwbGFjZSgvIG9mIC9pZywgJycpO1xuXHRzID0gcy5yZXBsYWNlKC8gaW4gYXJlYS9pZywgJyBhcmVhJyk7XG5cdHMgPSBzLnJlcGxhY2UoLy14LS9nLCAnJyk7XG5cdHMgPSBzLnJlcGxhY2UoL1xcblxcbisvZywgXCJcXG5cIik7XG5cdGJpdCA9IGJpdC5yZXBsYWNlKC9cXHMrL2lnLCAnICcpO1xuXHRyZXR1cm4gcztcbiAgfVxuXG4gIHB1YmxpYyBnZW5lcmF0ZUF0aXNOZXcobGV2ZWw6IHN0cmluZykge1xuICBcdGxldCB3eDpXZWF0aGVyID0gdGhpcy53ZWF0aGVyU2VydmljZS5jcmVhdGVOZXdXZWF0aGVyKCk7XG4gIFx0bGV0IGFkTmFtZSA9IHRoaXMuYWVyb2Ryb21lc1NlcnZpY2UuZ2V0TmFtZSgpO1xuICBcdHRoaXMuYWVyb2Ryb21lc1NlcnZpY2Uuc2V0V2luZCh3eC53aW5kRGlyZWN0aW9uLCB3eC53aW5kU3RyZW5ndGgpO1xuXHRsZXQgYXRpczogQXRpc0ludGVyZmFjZSA9IHtcblx0XHQnYWQnOiBhZE5hbWUsXG5cdFx0J2lkZW50JzogdGhpcy5nZXRJZGVudCgpLFxuXHRcdCd0aW1lJzogJzAwMDAnLFxuXHRcdCdhcHByb2FjaCc6IHRoaXMuYWVyb2Ryb21lc1NlcnZpY2UuZ2V0QXBwcm9hY2goKSxcblx0XHQncnVud2F5cyc6IHRoaXMuYWVyb2Ryb21lc1NlcnZpY2UuZ2V0QWN0aXZlUnVud2F5c0FzVGV4dCgpLFxuICBcdFx0J3J1bndheXNTdXJmYWNlJzogdGhpcy5hZXJvZHJvbWVzU2VydmljZS5nZXRSdW53YXlTdXJmYWNlKCksXG4gIFx0XHQnaG9sZGluZyc6IHRoaXMuYWVyb2Ryb21lc1NlcnZpY2UuZ2V0SG9sZGluZygpLFxuICBcdFx0J3J1bndheU9wcyc6IHRoaXMuYWVyb2Ryb21lc1NlcnZpY2UuZ2V0UnVud2F5T3BlcmF0aW9ucygpLFxuICBcdFx0J3dpbmQnOiB0aGlzLndlYXRoZXJTZXJ2aWNlLndpbmRBc1RleHQoKSxcbiAgXHRcdCd4d2luZCc6IHRoaXMuYWVyb2Ryb21lc1NlcnZpY2UuZ2V0TWF4WHdpbmRBc1RleHQoKSxcbiAgXHRcdCd0d2luZCc6IHRoaXMuYWVyb2Ryb21lc1NlcnZpY2UuZ2V0TWF4VHdpbmRBc1RleHQoKSxcbiAgXHRcdCd2aXNpYmlsaXR5JzogdGhpcy53ZWF0aGVyU2VydmljZS52aXNBc1RleHQoKSxcbiAgXHRcdCd3ZWF0aGVyJzogdGhpcy53ZWF0aGVyU2VydmljZS53ZWF0aGVyQXNTdHJpbmcoKSxcbiAgXHRcdCdjbG91ZCc6IHRoaXMud2VhdGhlclNlcnZpY2UuY2xvdWRBc1RleHQoKSxcbiAgXHRcdCd0ZW1wJzogd3gudGVtcCxcbiAgXHRcdCdxbmgnOiB0aGlzLndlYXRoZXJTZXJ2aWNlLnFuaEFzVGV4dCgpLFxuICBcdFx0J2NvbnRhY3QnOiB0aGlzLmFlcm9kcm9tZXNTZXJ2aWNlLnNlcnZpY2VzQXNTdHJpbmcoKSxcbiAgXHRcdCdzaG9ydGhhbmQnOiAnJyxcbiAgXHRcdCdxdWVzdGlvbnMnOiBbXVxuXHR9IGFzIGFueTtcblx0YXRpcy5zaG9ydGhhbmQgPSB0aGlzLnNob3J0aGFuZEF0aXMoYXRpcyk7XG5cdHRoaXMubWFrZUF0aXNRdWVzdGlvbnMoYXRpcyk7XG5cdGNvbnNvbGUubG9nKGF0aXMpO1xuXHR0aGlzLmN1cnJlbnRBdGlzID0gYXRpcztcbiAgfVxuXG4gIHB1YmxpYyBtYWtlQXRpc1F1ZXN0aW9ucyhhdGlzOiBBdGlzSW50ZXJmYWNlKSB7XG4gIFx0dGhpcy5xdWVzdGlvblNlcnZpY2UuYWRkUXVlc3Rpb24oJ3doYXQgaW5mb3JtYXRpb24gaGF2ZSB5b3UgcmVjZWl2ZWQ/JywgYXRpcy5pZGVudCxcblx0XHRcdFx0WydhbHBoYScsICdicmF2bycsICdjaGFybGllJywgJ2RlbHRhJywgJ2VjaG8nLCAnZm94dHJvdCcsICdnb2xmJywgJ2hvdGVsJ10sXG5cdFx0XHRcdCcnKTtcblx0aWYgKGF0aXMuYXBwcm9hY2ggIT09ICcnKSB7XG5cdFx0dGhpcy5xdWVzdGlvblNlcnZpY2UuYWRkUXVlc3Rpb24oJ0lmIGFycml2aW5nLCB3aGF0IHNvcnQgb2YgYXBwcm9hY2ggd291bGQgeW91IGV4cGVjdD8nLCBhdGlzLmFwcHJvYWNoLFxuXHRcdFx0XHRbJ3Zpc3VhbCcsICdpbHMnLCAnc3BlY2lhbCB2ZnInLCAnc3RhbmRhcmQnLCAnY2Fubm90IGJlIGRldGVybWluZWQnXSxcblx0XHRcdFx0JycpO1xuXHR9XG5cdHRoaXMucXVlc3Rpb25TZXJ2aWNlLmFkZFF1ZXN0aW9uKCdXaGF0IHJ1bndheSB3b3VsZCB5b3UgZXhwZWN0IGZvciBhcnJpdmFsPycsIGF0aXMucnVud2F5cywgWycwNicsICczNCcsICcxMUwnLCAnMzAnLCAnMjgnLCAnMjlDIG9yIDI5UiddLCAnJyk7XG5cdHRoaXMucXVlc3Rpb25TZXJ2aWNlLmFkZFF1ZXN0aW9uKCdXaGF0IGlzIHRoZSB3aW5kPycsIGF0aXMud2luZCwgWycyNzAvMTAnLCAnMjIwLzEwJywgJzEyMC0xNDAvNS0xMCcsICd2YXJpYWJsZSA1JywgJ2NhbG0nXSwgJycpO1xuXHRpZiAoYXRpcy54d2luZCAhPT0gJycpIHtcblx0XHR0aGlzLnF1ZXN0aW9uU2VydmljZS5hZGRRdWVzdGlvbignV2hhdCBpcyB0aGUgbWF4aW11bSBjcm9zcyB3aW5kIHJlcG9ydGVkPycsIGF0aXMueHdpbmQsXG4gICAgICAgXHRcdFx0XHRbJzAnLCAnNScsICc3JywgJzEwJywgJzEyJywgJzE1J10sICcnKTtcblx0fVxuXHRpZiAoYXRpcy50d2luZCAhPT0gJycpIHtcblx0XHR0aGlzLnF1ZXN0aW9uU2VydmljZS5hZGRRdWVzdGlvbignV2hhdCBpcyB0aGUgbWF4aW11bSB0YWlsIHdpbmQgcmVwb3J0ZWQ/JywgYXRpcy50d2luZCxcblx0XHRcdFx0WycwJywgJzEnLCAnMicsICczJywgJzQnLCAnNSddLCAnJyk7XG5cdH1cblx0aWYgKGF0aXMud2VhdGhlciA9PT0gJ0NBVk9LJykge1xuXHRcdHRoaXMucXVlc3Rpb25TZXJ2aWNlLmFkZFF1ZXN0aW9uKCdJcyB0aGVyZSBjbG91ZCBhYm92ZSA1MDAwIGZlZXQ/JywgJ3Bvc3NpYmx5IHllcycsXG5cdFx0XHRcdFsnZGVmaW5pdGVseSB5ZXMnLCAnZGVmaW5pdGVseSBubyddLCBcIkNBVk9LIG1lYW5zIG5vIGNsb3VkIGJlbG93IDUwMDAnIGJ1dCB0aGVyZSBjYW4gYmUgY2xvdWQgYWJvdmUgdGhpc1wiKTtcblx0XHR0aGlzLnF1ZXN0aW9uU2VydmljZS5hZGRRdWVzdGlvbignV2hhdCBpcyB0aGUgdmlzaWJpbGl0eT8nLCAnMTBrbSBvciBncmVhdGVyJyxcblx0XHRcdCAgICAgICBcdFsnMjAwMG0nLCAnNTAwMG0nLCAnOGttJ10sIFwiQ0FWT0sgbWVhbnMgdmlzaWJpbGl0eSBtdXN0IGJlIDEwa20gb3IgZ3JlYXRlclwiKTtcblx0XHR0aGlzLnF1ZXN0aW9uU2VydmljZS5hZGRRdWVzdGlvbignQ291bGQgdGhlcmUgYmUgVG93ZXJpbmcgQ3VtdWx1cyBhYm92ZSB0aGUgYWVyb2Ryb21lPycsICdkZWZpbml0ZWx5IG5vJyxcblx0XHRcdCAgICAgICBcdFsnZGVmaW5pdGVseSB5ZXMnLCAncG9zc2libHkgeWVzJ10sIFwidGhlcmUgbXVzdCBiZSBubyB0b3dlcmluZyBDdW11bHVzIGlmIENBVk9LXCIpO1xuXHRcdHRoaXMucXVlc3Rpb25TZXJ2aWNlLmFkZFF1ZXN0aW9uKCdDb3VsZCB0aGVyZSBiZSBTdHJhdG9jdW11bHVzIGFib3ZlIHRoZSBhZXJvZHJvbWU/JywgJ3Bvc3NpYmx5IHllcycsXG5cdFx0XHQgICAgICAgXHRbJ2RlZmluaXRlbHkgbm8nLCAnZGVmaW5pdGVseSB5ZXMnXSwgXCJwcm92aWRpbmcgdGhlIGNsb3VkIGlzIGFib3ZlIDUwMDAnIGl0IGNhbiBzdGlsbCBiZSBDQVZPS1wiKTtcblx0fSBlbHNlIHtcblx0XHR0aGlzLnF1ZXN0aW9uU2VydmljZS5hZGRRdWVzdGlvbignV2hhdCBpcyB0aGUgdmlzaWJpbGl0eT8nLCBhdGlzLnZpc2liaWxpdHksXG5cdFx0XHRbJzgwMCBtZXRyZXMnLCAnMjAwMCBtZXRyZXMnLCAnNTAwMCBtZXRyZXMnLCAnOCBraWxvbWV0cmVzJywgJ2dyZWF0ZXIgdGhhbiAxMCBraWxvbWV0cmVzJ10sIFwiXCIpO1xuXHRcdHRoaXMucXVlc3Rpb25TZXJ2aWNlLmFkZFF1ZXN0aW9uKCdXaGF0IGlzIHRoZSByZXBvcnRlZCBjbG91ZD8nLCBhdGlzLmNsb3VkLFxuXHRcdFx0Wydicm9rZW4gNTAwJywgJ3NjYXR0ZXJlZCAxNTAwJywgJ2ZldyAyNTAwJywgJ292ZXJjYXN0IDMwMDAnXSwgXCJcIik7XG5cdFx0dGhpcy5xdWVzdGlvblNlcnZpY2UuYWRkUXVlc3Rpb24oJ0NvdWxkIHRoZXJlIGJlIHVucmVwb3J0ZWQgY2xvdWQgYXQgNjAwMD8nLCAneWVzJyxcblx0XHRcdFsnbm8nXSwgXCJBVElTIHdpbGwgb25seSByZXBvcnQgY2xvdWQgYmVsb3cgNTAwMCcgKHVubGVzcyBDQiBvciBUQ1UpXCIpO1xuXHR9XG5cdHRoaXMucXVlc3Rpb25TZXJ2aWNlLmFkZFF1ZXN0aW9uKCdXaGF0IGlzIHRoZSB0ZW1wZXJhdHVyZT8nLCBhdGlzLnRlbXAudG9TdHJpbmcoKSxcblx0XHRcdCAgICAgICBcdFsnMTAnLCAnMTMnLCAnMTQnLCAnMTUnLCAnMjAnLCAnMjInLCAnMjMnLCAnMjUnLCAnMjgnLCAnMzAnLCAnMzInXSwgXCJcIik7XG5cdHRoaXMucXVlc3Rpb25TZXJ2aWNlLmFkZFF1ZXN0aW9uKCdXaGF0IGlzIHRoZSBRTkg/JywgYXRpcy5xbmgsXG5cdFx0XHQgICAgICAgXHRbJzEwMDEnLCAnMTAwMycsICcxMDA0JywgJzEwMDUnLCAnMTAxMCcsICcxMDEyJywgJzEwMTMnLCAnMTAxNCcsICcxMDE1JywgJzEwMTcnLCAnMTAyMCddLCBcIlwiKTtcbiAgfVxuXG4gIHB1YmxpYyB3aW5kQXNXb3JkcyhzdDogc3RyaW5nKSA6IHN0cmluZyB7XG4gIFx0c3QgPSBzdC5yZXBsYWNlKC9MXFxiL2csICcgbGVmdCcpO1xuICBcdHN0ID0gc3QucmVwbGFjZSgvUlxcYi9nLCAnIHJpZ2h0Jyk7XG4gIFx0c3QgPSBzdC5yZXBsYWNlKC9DXFxiL2csICcgY2VudHJlJyk7XG4gIFx0c3QgPSBzdC5yZXBsYWNlKC8wL2csICd6ZXJvICcpO1xuXHRzdCA9IHN0LnJlcGxhY2UoLzEvZywgJ29uZSAnKTtcbiAgXHRzdCA9IHN0LnJlcGxhY2UoLzIvZywgJ3R3byAnKTtcbiAgXHRzdCA9IHN0LnJlcGxhY2UoLzMvZywgJ3RocmVlICcpO1xuICBcdHN0ID0gc3QucmVwbGFjZSgvNC9nLCAnZm91ciAnKTtcbiAgXHRzdCA9IHN0LnJlcGxhY2UoLzUvZywgJ2ZpdmUgJyk7XG4gIFx0c3QgPSBzdC5yZXBsYWNlKC82L2csICdzaXggJyk7XG4gIFx0c3QgPSBzdC5yZXBsYWNlKC83L2csICdzZXZlbiAnKTtcbiAgXHRzdCA9IHN0LnJlcGxhY2UoLzgvZywgJ2VpZ2h0ICcpO1xuXHRzdCA9IHN0LnJlcGxhY2UoLzkvZywgJ25pbmUgJyk7XG5cdHJldHVybiBzdDtcbiAgfVxuXG4gIHB1YmxpYyBzdXJmYWNlQXNXb3JkcyhzdDogc3RyaW5nKSA6IHN0cmluZyB7XG4gIFx0c3QgPSBzdC5yZXBsYWNlKC9XRVQvaWcsICdydW53YXkgd2V0Jyk7XG4gIFx0c3QgPSBzdC5yZXBsYWNlKC9EQU1QL2lnLCAncnVud2F5IHdldCcpO1xuICBcdHN0ID0gc3QucmVwbGFjZSgvRkxPT0RFRC9pZywgJ3J1bndheSBmbG9vZGVkJyk7XG4gIFx0c3QgPSBzdC5yZXBsYWNlKC9XQVRFUiBQQVRDSEVTL2lnLCAnd2F0ZXIgcGF0Y2hlcyBvbiBydW53YXknKTtcblx0cmV0dXJuIHN0O1xuICB9XG5cbiAgcHVibGljIHZpc0FzV29yZHMoc3Q6IHN0cmluZykgOiBzdHJpbmcge1xuICBcdHN0ID0gc3QucmVwbGFjZSgvIDEwIC9nLCAnIHRlbiAnKTtcbiAgXHRzdCA9IHN0LnJlcGxhY2UoLzAwMCAvZywgJ3Rob3VzYW5kICcpO1xuICBcdHN0ID0gc3QucmVwbGFjZSgvMDAgL2csICdodW5kcmVkICcpO1xuXHRzdCA9IHRoaXMud2luZEFzV29yZHMoc3QpO1xuXHRyZXR1cm4gc3Q7XG4gIH1cblxuICBwdWJsaWMgYXBwcm9hY2hBc1dvcmRzKHN0OiBzdHJpbmcpIDogc3RyaW5nIHtcblx0c3QgPSBzdC5yZXBsYWNlKC9JTFMvZywgJ0kgTCBTJyk7XG5cdHJldHVybiBzdDtcbiAgfVxuXG4gIHB1YmxpYyBydW53YXlzQXNXb3JkcyhzdDogc3RyaW5nKSA6IHN0cmluZyB7XG4gIFx0c3QgPSBzdC5yZXBsYWNlKC9ML2csICcgbGVmdCcpO1xuICBcdHN0ID0gc3QucmVwbGFjZSgvUi9nLCAnIHJpZ2h0Jyk7XG4gIFx0c3QgPSBzdC5yZXBsYWNlKC9DL2csICcgY2VudHJlJyk7XG4gIFx0c3QgPSBzdC5yZXBsYWNlKC8wL2csICcgemVybycpO1xuICBcdHN0ID0gc3QucmVwbGFjZSgvMS9nLCAnIG9uZScpO1xuICBcdHN0ID0gc3QucmVwbGFjZSgvMi9nLCAnIHR3bycpO1xuICBcdHN0ID0gc3QucmVwbGFjZSgvMy9nLCAnIHRocmVlJyk7XG4gIFx0c3QgPSBzdC5yZXBsYWNlKC80L2csICcgZm91cicpO1xuICBcdHN0ID0gc3QucmVwbGFjZSgvNS9nLCAnIGZpdmUnKTtcbiAgXHRzdCA9IHN0LnJlcGxhY2UoLzYvZywgJyBzaXgnKTtcbiAgXHRzdCA9IHN0LnJlcGxhY2UoLzcvZywgJyBzZXZlbicpO1xuICBcdHN0ID0gc3QucmVwbGFjZSgvOC9nLCAnIGVpZ2h0Jyk7XG5cdHN0ID0gc3QucmVwbGFjZSgvOS9nLCAnIG5pbmUnKTtcblx0c3QgPSBzdC5yZXBsYWNlKC9cXC4vZywgJyBkZWNpbWFsJyk7XG5cdHJldHVybiBzdDtcbiAgfVxuXG4gIHB1YmxpYyBhdGlzQXNXb3JkcygpOiBzdHJpbmcge1xuICBcdGxldCBhTGluZXM6IHN0cmluZ1tdID0gW107XG5cdGxldCBhdGlzID0gdGhpcy5jdXJyZW50QXRpcztcblx0YUxpbmVzLnB1c2goYXRpcy5hZCArICcgdGVybWluYWwgaW5mb3JtYXRpb24gJyArIGF0aXMuaWRlbnQpO1x0XG5cdGlmIChhdGlzLmFwcHJvYWNoICE9PSAnJykge1xuXHRcdGFMaW5lcy5wdXNoKCdleHBlY3QgJyArIHRoaXMuYXBwcm9hY2hBc1dvcmRzKGF0aXMuYXBwcm9hY2gpKTtcblx0fVxuXHRhTGluZXMucHVzaCgncnVud2F5ICcgKyB0aGlzLnJ1bndheXNBc1dvcmRzKGF0aXMucnVud2F5cykpO1xuXG5cdGlmIChhdGlzLnJ1bndheXNTdXJmYWNlICE9PSAnJykge1xuXHRcdGFMaW5lcy5wdXNoKHRoaXMuc3VyZmFjZUFzV29yZHMoYXRpcy5ydW53YXlzU3VyZmFjZSkpO1xuXHR9XG5cdGlmIChhdGlzLmhvbGRpbmcgIT09ICcnKSB7XG5cdFx0YUxpbmVzLnB1c2goYXRpcy5ob2xkaW5nKTtcblx0fVxuXHRpZiAoYXRpcy5ydW53YXlPcHMgIT09ICcnKSB7XG5cdFx0YUxpbmVzLnB1c2goYXRpcy5ydW53YXlPcHMpO1xuXHR9XG5cdGFMaW5lcy5wdXNoKCd3aW5kICcgKyB0aGlzLndpbmRBc1dvcmRzKGF0aXMud2luZCkpO1xuXG5cdGlmIChhdGlzLnh3aW5kICE9PSAnJykge1xuXHRcdGFMaW5lcy5wdXNoKHRoaXMud2luZEFzV29yZHMoYXRpcy54d2luZCkpO1xuXHR9XG5cdGlmIChhdGlzLnR3aW5kICE9PSAnJykge1xuXHRcdGFMaW5lcy5wdXNoKHRoaXMud2luZEFzV29yZHMoYXRpcy50d2luZCkpO1xuXHR9XG5cdGlmIChhdGlzLndlYXRoZXIgIT09ICdDQVZPSycpIHtcblx0XHRhTGluZXMucHVzaCgndmlzaWJpbGl0eSAnICsgdGhpcy52aXNBc1dvcmRzKGF0aXMudmlzaWJpbGl0eSkpO1xuXHR9XG5cdGlmIChhdGlzLndlYXRoZXIgIT09ICcnKSB7XG5cdFx0YUxpbmVzLnB1c2goJ3dlYXRoZXIgJyArIHRoaXMudmlzQXNXb3JkcyhhdGlzLndlYXRoZXIpKTtcblx0fVxuXHRpZiAoYXRpcy53ZWF0aGVyICE9PSAnQ0FWT0snKSB7XG5cdFx0YUxpbmVzLnB1c2goJ2Nsb3VkICcgKyBhdGlzLmNsb3VkKTtcblx0fVxuXHRhTGluZXMucHVzaCgndGVtcGVyYXR1cmUgJyArIHRoaXMud2luZEFzV29yZHMoYXRpcy50ZW1wLnRvU3RyaW5nKCkpKTtcblx0YUxpbmVzLnB1c2goJ1EgTiBIICcgKyB0aGlzLndpbmRBc1dvcmRzKGF0aXMucW5oKSk7XG5cdGFMaW5lcy5wdXNoKCdvbiBmaXJzdCBjb250YWN0IHdpdGggJyArIGF0aXMuYWQgKyAnICcgKyBhdGlzLmNvbnRhY3QgKyAnIG5vdGlmeSByZWNlaXB0IG9mIGluZm9ybWF0aW9uICcgKyBhdGlzLmlkZW50KTtcblx0bGV0IHRleHQgPSBhTGluZXMuam9pbignLCcpO1xuXHR0ZXh0ID0gdGV4dC5yZXBsYWNlKC8teC0vZywgJycpO1xuXHR0ZXh0ID0gdGV4dC5yZXBsYWNlKC8sLCsvZywgJywnKTtcblx0cmV0dXJuIHRleHQ7XG4gIH1cblxuICBwdWJsaWMgZ2VuZXJhdGVBdGlzKGxldmVsOiBzdHJpbmcpIDogc3RyaW5nIHtcblx0dGhpcy5nZW5lcmF0ZUF0aXNOZXcobGV2ZWwpO1xuXHRsZXQgd29yZHMgPSB0aGlzLmF0aXNBc1dvcmRzKCk7XG5cdGNvbnNvbGUubG9nKHdvcmRzKTtcblx0cmV0dXJuIHdvcmRzO1xufVxuXG5nZXRJZGVudCgpIHtcbmxldCBjaEluZGV4ID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogNyk7XG5sZXQgY2ggPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoSW5kZXggKyA2NSk7XG50aGlzLmlkZW50ID0gY2g7XG5yZXR1cm4gdGhpcy5zcGVha1NlcnZpY2UuYWxwaGFiZXQoY2gpO1xufVxuXG5wdWJsaWMgdG9OdW1iZXJzKG46IG51bWJlcikgOiBzdHJpbmcge1xubGV0IG1hcCA9IHtcblx0JzAnOiAnemVybycsXG5cdCcxJzogJ3d1bicsXG5cdCcyJzogJ3R3bycsXG5cdCczJzogJ3RocmVlJyxcblx0JzQnOiAnZm9yZScsXG5cdCc1JzogJ2ZpZmUnLFxuXHQnNic6ICdzaXgnLFxuXHQnNyc6ICdzZWZmZW4nLFxuXHQnOCc6ICdlaWdodCcsXG5cdCc5JzogJ25pbmVyJyxcblx0fTtcbmxldCBuc3QgPSBuLnRvU3RyaW5nKCk7XG5sZXQgZCA9IG5zdC5zcGxpdCgnJyk7XG5sZXQgcmVzcG9uc2U6IHN0cmluZ1tdID0gW107XG5mb3IgKGxldCBpID0gMDsgaSA8IGQubGVuZ3RoOyBpKyspIHtcblx0bGV0IGRzdCA9IGRbaV07XG5cdGxldCBkUGhvbiA9IG1hcFtkc3RdO1xuXHRpZiAoZFBob24gIT09IHVuZGVmaW5lZCkge1xuXHRcdHJlc3BvbnNlLnB1c2goZFBob24pO1xuXHR9IGVsc2Uge1xuXHRyZXNwb25zZS5wdXNoKGRzdCk7XG5cdH1cbn1cbnJldHVybiByZXNwb25zZS5qb2luKCcgJyk7XG59XG5cbn1cbiJdfQ==